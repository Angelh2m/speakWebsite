App.pages.storeLocator=App.pages.storeLocator||{};var storeExceptionToSkipGeocode=[202776,202886];var listlenght=0;$(function(){App.pages.storeLocator.locator.workshopLandingAction();if(0!==$("body.store-locator.store-locator-search").length)App.pages.storeLocator.locator.init();if(0!==$("body.store-locator.store-locator-landing").length){App.pages.storeLocator.locator.storeSearch();App.pages.storeLocator.locator.checkAuthRetailers();App.pages.storeLocator.locator.landingPageAction();App.pages.storeLocator.locator.init()}if(0!==$("body.workshop-landing.storelanding").length)App.pages.storeLocator.locator.appointmentAction();if($("body.cityList #cityStateLinks")[0])App.pages.storeLocator.locator.storeCityListing();App.pages.storeLocator.locator.fixInputPlaceholder()});App.pages.storeLocator.locator={map:null,mapData:null,mapFilteredData:[],isDirectStoreInResult:false,count:0,markers:[],resultType:"verizon",filters:[],searchTerm:"",currentLocation:"",allowLocation:0,myLatLng:null,myLat:null,myLng:null,searchLatlng:[],geocoder:null,selectedMarker:null,iconRed:null,iconGray:null,iconYellow:null,pinRed:null,pinGray:null,pinYellow:null,weekdays:["sun","mon","tue","wed","thu","fri","sat"],mySwiper:null,init:function(){if("undefined"!==typeof google){this.iconRed={url:App.constants.imagePath+"store-locator/red-map-pin.png",size:new google.maps.Size(36,36),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scaledSize:new google.maps.Size(36,36)};this.iconGray={url:App.constants.imagePath+"store-locator/blue-map-pin.png",size:new google.maps.Size(36,36),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scaledSize:new google.maps.Size(36,36)};this.iconYellow={url:App.constants.imagePath+"store-locator/yellow-map-pin.png",size:new google.maps.Size(30,30),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,0),scaledSize:new google.maps.Size(30,30)};this.pinRed=new google.maps.MarkerImage("//ec-scache.vzw.com/omni/d/i/store-locator/map-pin-red.png",new google.maps.Size(28,51),new google.maps.Point(0,0),new google.maps.Point(-5,15));this.pinGray=new google.maps.MarkerImage("//ec-scache.vzw.com/omni/d/i/store-locator/map-pin-gray1.png",new google.maps.Size(28,51),new google.maps.Point(0,0),new google.maps.Point(-5,15));this.pinYellow=new google.maps.MarkerImage(App.constants.imagePath+"store-locator/map-pin-yellow.png",new google.maps.Size(28,51),new google.maps.Point(0,0),new google.maps.Point(-5,15))}var a={zoom:13,panControl:true,zoomControl:true,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP},streetViewControl:false,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.HORIZONTAL_BAR,position:google.maps.ControlPosition.RIGHT_BOTTOM}};if($("#store-map-canvas").length>0){$("#store-map-canvas").css("height","660px");this.map=new google.maps.Map(document.getElementById("store-map-canvas"),a);this.geocoder=new google.maps.Geocoder;this.getSearchData();this.getMapData();this.populateMapData();this.showStoresList();this.showStores();this.checkAuthRetailers();this.storeSearch();this.storeSearchAction();this.showFilters();this.storeFilterAction();this.populateCityListUrl()}else{var b=this;if(0===$(".appointments-search").length)if($(".store-locator-search"))if($(".store-locator-search .inputBtnCombo")){$(".store-locator-search .inputBtnCombo").append('<div id="showNearStores" class="btn button square inputBtn" data-tracking="Find Nearest Store"><p class="fontSize_4 bold store-label">Find a Store</p></div><label class="geoLocationErrorMsg" style="color:#cd040b;"></label>');$(".store-locator-search #showNearStores").off().on("click",function(){$(".inputBtnCombo .geoLocationErrorMsg").html("");b.getcurrentLocation(true)})}}},getSearchData:function(){var a=window.location.search.substring(1);if(""!==a){var b=a.split("&");var c=[];for(var d=0;d<b.length;d++){var e=b[d].split("=");c[unescape(e[0])]=unescape(e[1])}if("all"===c.result)this.resultType=c.result;if("1"===c.allow){this.allowLocation=c.allow;this.currentLocation=c.q}if(c.q){this.searchTerm=c.q;$("#store-search").val(this.searchTerm).trigger("input");$("div.store-locator-search .btn-clear").removeClass("hidden")}if(c.lat&&c.long)this.myLatLng=new google.maps.LatLng(c.lat,c.long)}else{$("#store-search").val(this.searchTerm).trigger("input");$("div.store-locator-search .btn-clear").removeClass("hidden")}},getMapData:function(){var a=this;var b=$("#store-search").val();listlenght=resultsList.length;var c=false;if(location.search)if(location.search.indexOf)if(-1!==location.search.indexOf("type=appointments"))c=true;if(c)if(resultsList&&resultsList.length>0){var d=a.getParameterByName("appointmentName");if(d)document.location=resultsList[0].storeUrl+"?appointmentName="+d+"#showAppointments";else document.location=resultsList[0].storeUrl+"?#showAppointments"}else App.helpers.modal('<div class="cart-full-wrapper store-search-error clearfix"><p>Unable to find the appointments you are looking for. Please try a different area or search for other appointments.</p></div>',{type:"colorbox"},null,function(){document.location="/vzw/stores/appointments"});else if(resultsList.length<=0||void 0==resultsList){App.helpers.modal($(".store-locator-search-error").html(),{type:"colorbox",close:"hide"});$(".search-term").text(b);return-1}else a.setMapData(resultsList)},getParameterByName:function(a,b){if(!b)b=window.location.search;a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);if(!d)return null;if(!d[2])return"";return decodeURIComponent(d[2].replace(/\+/g," "))},setMapData:function(a){mapJsonData=a;this.mapData=mapJsonData},parseSearchTerm:function(a){if(void 0!=a){var b=this;var c=a.address_components;var d="";var e="";b.searchTermCity="";b.searchTermState="";b.searchTermZip="";for(var f=0;f<c.length;f++){var g=c[f];if(void 0!=g){var h=g.types[0];if(void 0!=h&&"street_number"===h){d=g.short_name;if(void 0==b.streetNumber)b.streetNumber=""}else if(void 0!=h&&"route"===h){e=g.short_name;if(void 0==b.streetName)b.streetName=""}else if(void 0!=h&&("locality"===h||"neighborhood"===h)){b.searchTermCity=g.long_name;if(void 0==b.searchTermCity)b.searchTermCity=""}else if(void 0!=h&&"administrative_area_level_1"===h){b.searchTermState=g.short_name;if(void 0==b.searchTermState)b.searchTermState=""}else if(void 0!=h&&"postal_code"===h){b.searchTermZip=g.short_name;if(void 0==b.searchTermZip)b.searchTermZip=""}else if(void 0!=h&&"administrative_area_level_2"===h)if(""==b.searchTermCity){b.searchTermCity=g.short_name;if(void 0==b.searchTermCity)b.searchTermCity=""}}}b.searchTermStreet=d+" "+e}},searchLocation:function(){var a=this;var b=a.searchTerm;if(null!=this.myLatLng){b=this.myLatLng.lat()+","+this.myLatLng.lng();this.geocoder.geocode({address:b,partialmatch:true},function(b,c){if(c===google.maps.GeocoderStatus.OK){a.searchLatlng.lat=b[0].geometry.location.lat();a.searchLatlng.lng=b[0].geometry.location.lng();a.searchLatlng.length=1;a.parseSearchTerm(b[0]);a.totalGeocoderReturn=0;a.getMapData();a.populateMapData();a.showStoresList();a.showStores()}})}else this.geocoder.geocode({address:b,componentRestrictions:{country:"US"},partialmatch:true},function(b,c){if(c===google.maps.GeocoderStatus.OK){a.searchLatlng.lat=b[0].geometry.location.lat();a.searchLatlng.lng=b[0].geometry.location.lng();a.searchLatlng.length=1;a.parseSearchTerm(b[0]);a.totalGeocoderReturn=0;a.getMapData();a.populateMapData();a.showStoresList();a.showStores()}})},storeSort:function(a,b){return a.distance-b.distance},populateMapData:function(){this.removeAllMarkers();this.clearListing();var a=$(".authorized_retailers_from_search").is(":checked");var b=this;this.count=0;this.mapFilteredData=[];$.each(this.mapData,function(c,d){b.mapData[c].pinType="INDIRECT"==d.channel?"gray":"red";if("INDIRECT"==d.channel)if("undefined"!==typeof d.prepayOnlyStoreInd&&null!==d.prepayOnlyStoreInd&&"Y"==d.prepayOnlyStoreInd)b.mapData[c].pinType="yellow";if($("#cityPage").length>0)b.resultType="all";if(b.filters.length>0){var e=Object.keys(d.category);var f=d.appointment_services;var g=d.workshops;var h=d.typeOfStore;var i=-1;for(var j=0,k=b.filters.length;j<k;++j){var l=b.filters[j];i=$.inArray(l,e)>-1?$.inArray(l,e):i;l=l.replace(/\_/g," ");i=$.inArray(l,f)>-1?$.inArray(l,f):i;i=$.inArray(l,g)>-1?$.inArray(l,g):i;i=$.inArray(l,h)>-1?$.inArray(l,h):i;if(-1==i)break}if("all"!==b.resultType&&i>-1){if(a&&"INDIRECT"!==d.channel)b.mapFilteredData.push(b.mapData[c]);else if(!a)b.mapFilteredData.push(b.mapData[c])}else if("all"===b.resultType&&i>-1)b.mapFilteredData.push(b.mapData[c])}else if("all"!==b.resultType){if(a&&"INDIRECT"!==d.channel)b.mapFilteredData.push(b.mapData[c]);else if(!a)b.mapFilteredData.push(b.mapData[c])}else if("all"===b.resultType)b.mapFilteredData.push(b.mapData[c])});this.totalGeocoderReturn=0;this.count=this.mapFilteredData.length;if(0===this.count&&this.filters.length>0){var c=vzwSc.getProperty("pageName");var d=function(){var a=App.metrics.getModalPagename("/No Stores Found");var b={prop11:"",prop13:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var e=function(){vzwSc.setPageName(c)};App.helpers.modal('<div class="cart-full-wrapper store-search-error clearfix"><h2>No stores found based on your filter selections.</h2><p>Please modify your search and try again.</p></div>',{type:"colorbox"},d,e)}if(0===this.count&&0===this.filters.length)$(".allStores > .pull-right").hide();else $(".allStores > .pull-right").show();var f="all"==b.resultType?"block":"none";$.each(this.mapFilteredData,function(a,c){var d=c.address+", "+c.city+", "+c.state+" "+c.zip;setTimeout(function(){b.geocodeAddress(d,c.lat,c.lng,a,c.storeId)},10)})},geocodeAddress:function(a,b,c,d,e){var f=this;this.geocoder.geocode({address:a,componentRestrictions:{country:"US"}},function(a,g){if(storeExceptionToSkipGeocode.indexOf(e)>=0){f.totalGeocoderReturn++;var h=new google.maps.LatLng(b,c);f.mapFilteredData[d].location=h}else{if(g===google.maps.GeocoderStatus.OK){f.mapFilteredData[d].location=a[0].geometry.location;f.totalGeocoderReturn++}else if(void 0!=b&&void 0!=c){f.totalGeocoderReturn++;var h=new google.maps.LatLng(b,c);f.mapFilteredData[d].location=h}else f.count--;if(f.totalGeocoderReturn===f.count)f.populateMap()}})},addMyLocation:function(){var a=this;var b=new google.maps.Marker({position:a.myLatLng,map:a.map,title:"Your current location",icon:"https://maps.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png"})},populateMap:function(){var a=this;var b=new google.maps.LatLngBounds;if(this.allowLocation){this.addMyLocation();if(null!=this.myLatLng&&a.map.getZoom()<10)b.extend(this.myLatLng);this.map.fitBounds(b)}this.mapFilteredData.sort(this.storeSort);if(1==this.count)$.each(this.mapFilteredData,function(c,d){if("null"!=d.lat&&"null"!=d.lng){var e=new google.maps.LatLng(d.lat,d.lng);a.addMarker(e,c,d.pinType);b.extend(e);a.map.setCenter(b.getCenter());a.map.setZoom(15)}});else $.each(this.mapFilteredData,function(c,d){if("null"!=d.lat&&"null"!=d.lng){var e=new google.maps.LatLng(d.lat,d.lng);a.addMarker(e,c,d.pinType);b.extend(e);a.map.fitBounds(b)}});$(".tooltip").betterTooltip();if(false===this.isDirectStoreInResult)$(".btnFilter").addClass("hide")},addMarker:function(a,b,c){var d="red"===c?this.iconRed:this.iconGray;if("red"===c)d=this.iconRed;else if("yellow"===c)d=this.iconYellow;else d=this.iconGray;var e={coord:[12,12,12],type:"circle"};var f=new google.maps.Marker({position:a,map:this.map,icon:d,shape:e});var g=new this.Label({map:this.map});g.set("zIndex",100);g.bindTo("position",f,"position");g.set("text",b+1);g.set("icon_class",c);var h=this;google.maps.event.addListener(f,"click",function(a){if($("#resultsPage").length>0)h.markerSelected(this,b,c)});this.markers[b]=f;if($("#resultsPage").length>0)this.populateList(b)},markerSelected:function(a,b,c){this.resetMarkerSelected();var d="red"===c?this.pinRed:this.pinGray;if("red"===c)d=this.iconRed;else if("yellow"===c)d=this.iconYellow;else d=this.iconGray;a.setIcon(d);$(".seq_item_"+(b+1)).css("top","-9px");if(b+1>=10)$(".seq_item_"+(b+1)).css("left","12px");else $(".seq_item_"+(b+1)).css("left","15px");this.populateDetails(b);this.selectedMarker=b+1},listItemAction:function(){var a=this;$(document).on("click",".product.swiper-slide",function(b){var c=$(b.target);if(c.is(".show-direction"));else if(c.is(".premium_details")||c.is(".premium_details span"));else if(c.is(".storePageLink"));else{var d=$(this).data("pointid")-1;var e=$(this).data("pintype").replace("icon-","");a.markerSelected(a.markers[d],d,e)}})},getDirection:function(a){var b;if(navigator.userAgent.match(/Android/))b="geo:0,0?q="+a;else if(this.allowLocation)b="https://maps.google.com/maps?saddr="+encodeURIComponent(this.currentLocation)+"&daddr="+a;else b="https://maps.google.com/maps?daddr="+a;return b},populateList:function(a){var b=Hogan.compile($("#point_list").html());var c=new Date;var d=this.weekdays[c.getDay()];var e=this.weekdays[(c.getDay()+1)%7];var f=this.mapFilteredData[a].distance;f=Math.floor(100*f)/100;var g=this.mapFilteredData[a].address+" "+this.mapFilteredData[a].city+", "+this.mapFilteredData[a].state;var h=this.getDirection(g);var i=this.mapFilteredData[a].title;i=i.length>35?i.substring(0,35)+"...":i;var j=this.mapFilteredData[a].storeId;if(false===this.isDirectStoreInResult)this.isDirectStoreInResult="INDIRECT"==this.mapFilteredData[a].channel?false:true;if(null==this.mapFilteredData[a].openingHours[d]||""==this.mapFilteredData[a].openingHours[d])this.mapFilteredData[a].openingHours[d]="CLOSED";if(null==this.mapFilteredData[a].openingHours[e]||""==this.mapFilteredData[a].openingHours[e])this.mapFilteredData[a].openingHours[e]="CLOSED";var k={pointId:a+1,colorClass:"INDIRECT"==this.mapFilteredData[a].channel?"icon-gray":"icon-red",title:i,distance:parseFloat(f).toFixed(1)+" mi",direction:h,storeId:j,address:this.mapFilteredData[a].address,city:this.mapFilteredData[a].city,state:this.mapFilteredData[a].stateAbbr||this.mapFilteredData[a].state,zip:this.mapFilteredData[a].zip,phone:this.mapFilteredData[a].phone,today:"undefined"!==this.mapFilteredData[a].openingHours[d]?this.mapFilteredData[a].openingHours[d]:false,tomorrow:"undefined"!==this.mapFilteredData[a].openingHours[e]?this.mapFilteredData[a].openingHours[e]:false,timeOffset:"undefined"!==this.mapFilteredData[a].timeOffset?this.mapFilteredData[a].timeOffset:false,premiumRetailer:this.mapFilteredData[a].premiumRetailer?true:false,instorePickupFlag:this.mapFilteredData[a].instorePickupFlag,premiumDetails:this.mapFilteredData[a].premiumDetails,storeUrl:this.mapFilteredData[a].storeUrl?this.mapFilteredData[a].storeUrl:false,authorizedRetailer:"INDIRECT"==this.mapFilteredData[a].channel?true:false,energyStarFlag:"Y"==this.mapFilteredData[a].energyStarFlag?true:false,energyStarImagePath:this.mapFilteredData[a].energyStarImage,leedImagePath:this.mapFilteredData[a].leedImage,leedFlag:"Y"==this.mapFilteredData[a].leedFlag?true:false,leedEnergyFlags:"Y"==this.mapFilteredData[a].leedFlag&&"Y"==this.mapFilteredData[a].energyStarFlag?true:false,futureStoreshowHideClass:"Future"==this.mapFilteredData[a].storeStatus?"":"hide",storeOpened:"Future"==this.mapFilteredData[a].storeStatus?false:true,hideStoreInfoClass:"Future"==this.mapFilteredData[a].storeStatus?"hide":"",openingDate:this.mapFilteredData[a].openingDate};if("INDIRECT"==this.mapFilteredData[a].channel)if("undefined"!==typeof this.mapFilteredData[a].prepayOnlyStoreInd&&null!==this.mapFilteredData[a].prepayOnlyStoreInd&&"Y"==this.mapFilteredData[a].prepayOnlyStoreInd){k.colorClass="icon-yellow";k.prepayServiceOnlyStore="This location only sells prepaid service"}if("undefined"!==typeof k.timeOffset){k.today=SLfmtHours1(k.today);k.today=removeDuplicateClosedStr(k.today);try{if(k.today.toUpperCase().indexOf("CLOSED")<0)k.today=dynamicTime(k.today,k.timeOffset)}catch(a){}}else{k.today=SLfmtHours(k.today);k.today=removeDuplicateClosedStr(k.today)}k.tomorrow=SLfmtHours(k.tomorrow);k.tomorrow=removeDuplicateClosedStr(k.tomorrow);$(".list-view .swiper-wrapper, .list-view .listview-wrapper").append(b.render(k));$(".list-view").css("height","660px").css("overflow-y","scroll");this.listSlider();if(a+1==listlenght)$(".store-list-product.list-view .information").each(function(){$Selector=$(this).find("h3 div");addEllipses($Selector,65);$Selector=$(this).find(".big-add-text span").eq(0);addEllipses($Selector,35,"N");$Selector=$(this).find(".big-add-text span").eq(1);addEllipses($Selector,35,"N")})},populateDetails:function(a){var b=Hogan.compile($("#point_details").html());var c=this.mapFilteredData[a].distance;c=Math.floor(100*c)/100;var d=this.mapFilteredData[a].address+" "+this.mapFilteredData[a].city+", "+this.mapFilteredData[a].state;var e=this.getDirection(d);var f=this.mapFilteredData[a].storeId;var g=new Date;var h=this.weekdays[g.getDay()];var i=this.weekdays[(g.getDay()+1)%7];var j=new Array;var j=new Array;j[0]=this.mapFilteredData[a].openingHours.mon;j[1]=this.mapFilteredData[a].openingHours.tue;j[2]=this.mapFilteredData[a].openingHours.wed;j[3]=this.mapFilteredData[a].openingHours.thu;j[4]=this.mapFilteredData[a].openingHours.fri;j[5]=this.mapFilteredData[a].openingHours.sat;j[6]=this.mapFilteredData[a].openingHours.sun;var k=buildSchedule(j,new Array,true);if(false===this.isDirectStoreInResult)this.isDirectStoreInResult="INDIRECT"==this.mapFilteredData[a].channel?false:true;if(null==this.mapFilteredData[a].openingHours[h]||""==this.mapFilteredData[a].openingHours[h])this.mapFilteredData[a].openingHours[h]="CLOSED";if(null==this.mapFilteredData[a].openingHours[i]||""==this.mapFilteredData[a].openingHours[i])this.mapFilteredData[a].openingHours[i]="CLOSED";var l={pointId:a+1,colorClass:"INDIRECT"==this.mapFilteredData[a].channel?"icon-gray":"icon-red",title:this.mapFilteredData[a].title,distance:parseFloat(c).toFixed(1)+" mi",direction:e,storeId:f,address:this.mapFilteredData[a].address,city:this.mapFilteredData[a].city,state:this.mapFilteredData[a].stateAbbr||this.mapFilteredData[a].state,zip:this.mapFilteredData[a].zip,phone:this.mapFilteredData[a].phone,today:"undefined"!==this.mapFilteredData[a].openingHours[h]?this.mapFilteredData[a].openingHours[h]:false,tomorrow:"undefined"!==this.mapFilteredData[a].openingHours[i]?this.mapFilteredData[a].openingHours[i]:false,timeOffset:"undefined"!==this.mapFilteredData[a].timeOffset?this.mapFilteredData[a].timeOffset:false,monFri:k,rate:"rate-"+this.mapFilteredData[a].rating,totalReview:this.mapFilteredData[a].totalReviews,review:this.mapFilteredData[a].review,haveFeatures:this.mapFilteredData[a].storeFeatures.length,features:this.mapFilteredData[a].storeFeatures.join(", "),haveAppointmentServices:this.mapFilteredData[a].appointment_services.length,appointmentServices:this.mapFilteredData[a].appointment_services.join(", "),premiumRetailer:this.mapFilteredData[a].premiumRetailer?true:false,instorePickupFlag:this.mapFilteredData[a].instorePickupFlag,storeUrl:this.mapFilteredData[a].storeUrl?this.mapFilteredData[a].storeUrl:false,authorizedRetailer:"INDIRECT"==this.mapFilteredData[a].channel?true:false,futureStoreshowHideClass:"Future"==this.mapFilteredData[a].storeStatus?"":"hide",energyStarFlag:"Y"==this.mapFilteredData[a].energyStarFlag?true:false,energyStarImagePath:this.mapFilteredData[a].energyStarImage,leedImagePath:this.mapFilteredData[a].leedImage,leedFlag:"Y"==this.mapFilteredData[a].leedFlag?true:false,leedEnergyFlags:"Y"==this.mapFilteredData[a].leedFlag&&"Y"==this.mapFilteredData[a].energyStarFlag?true:false,storeOpened:"Future"==this.mapFilteredData[a].storeStatus?false:true,hideStoreInfoClass:"Future"==this.mapFilteredData[a].storeStatus?"hide":"",openingDate:this.mapFilteredData[a].openingDate};if("INDIRECT"==this.mapFilteredData[a].channel)if("undefined"!==typeof this.mapFilteredData[a].prepayOnlyStoreInd&&null!==this.mapFilteredData[a].prepayOnlyStoreInd&&"Y"==this.mapFilteredData[a].prepayOnlyStoreInd){l.colorClass="icon-yellow";l.prepayServiceOnlyStore="This location only sells prepaid service"}if("undefined"!==typeof l.timeOffset){l.today=SLfmtHours1(l.today);l.today=removeDuplicateClosedStr(l.today);try{if(l.today.toUpperCase().indexOf("CLOSED")<0)l.today=dynamicTime(l.today,l.timeOffset)}catch(a){}}else{l.today=SLfmtHours(l.today);l.today=removeDuplicateClosedStr(l.today)}l.tomorrow=SLfmtHours(l.tomorrow);l.tomorrow=removeDuplicateClosedStr(l.tomorrow);l.monFri="<ul><li>Today: "+l.today+"</li><li>Tomorrow: "+l.tomorrow+"</li></ul>";$(".details-view").html(b.render(l));$(".list-view").hide();$(".list-view-pager").hide();$(".details-view").show();$(".allStores").hide();$(".store-filter, .store-filter-button").addClass("hide")},resetMarkerSelected:function(){if(null!==this.selectedMarker){var a=$(".seq_item_"+this.selectedMarker).hasClass("red")?this.iconRed:this.iconGray;if($(".seq_item_"+this.selectedMarker).hasClass("red"))a=this.iconRed;else if($(".seq_item_"+this.selectedMarker).hasClass("yellow"))a=this.iconYellow;else a=this.iconGray;this.markers[this.selectedMarker-1].setIcon(a);$(".seq_item_"+this.selectedMarker).css("top","6px");if(this.selectedMarker>=10)$(".seq_item_"+this.selectedMarker).css("left","11px");else $(".seq_item_"+this.selectedMarker).css("left","14px")}},showStoresList:function(){var a=this;$(document).on("click",".product .close-button",function(b){b.preventDefault();$(".details-view").hide();$(".list-view").show();$(".list-view-pager").show();$(".allStores").show();a.listSlider();a.resetMarkerSelected()})},showStores:function(){if("verizon"===this.resultType);},removeAllMarkers:function(){if(this.markers.length>0)for(var a in this.markers)if(null!=a&&null!=this.markers[a]){this.markers[a].setMap(null);this.markers[a]=null;$(".seq_item_"+(parseInt(a,10)+1)).parent().remove()}},clearListing:function(){$(".list-view .swiper-wrapper").empty()},listSlider:function(){var a=null,b=$(".store-list-product.list-view"),c=0,d=b.height(),e=0;if(b.length>0){b.children().eq(0).css({position:"relative",top:0});a=b.find(".swiper-slide");a.each(function(){e+=$(this).outerHeight()})}var f=this;$(".arrow-left").hide().off("click.listview").on("click.listview",function(e){e.preventDefault();if(a){var f=null,g=0,h=0,j=c>0;while(j){f=a.eq(c-1);h=f.outerHeight(true);g+=h;if(g>=d||c<=0){g-=h;j=false;break}c--}$(".arrow-right").show().removeClass("hide");a.css("visibility","visible");if(c<=0){c=0;$(this).hide();$(".arrow-right").html("More Stores");b.children().eq(0).animate({top:0},1e3,function(){for(i=c+3;i<=a.length;i++)a.eq(i).css("visibility","hidden")})}else if(g>0){$(".arrow-left").show();b.children().eq(0).animate({top:"+="+g},1e3,function(){for(i=c+3;i<=a.length;i++)a.eq(i).css("visibility","hidden")})}}});$(".arrow-right").show().off("click.listview").on("click.listview",function(f){f.preventDefault();if(a){var g=null,h=0,j=0,k=c+1<a.length,l=this;while(k){g=a.eq(c);j=g.outerHeight(true);h+=j;if(c+1>=a.length||h>=d){k=false;h-=j;break}c++}$(".arrow-left").show();a.css("visibility","visible");b.children().eq(0).animate({top:"-="+h},1e3,function(){if(-parseInt(b.children().eq(0).css("top"))+b.height()>=e)$(l).hide().addClass("hide")})}for(i=c+3;i<=a.length;i++)a.eq(i).css("visibility","hidden")});if(e<d)$(".arrow-right").hide()},showFilters:function(){$(".btnFilter").on("click",function(a){a.preventDefault();if($(".store-filter").hasClass("hide")){if(!$(".store-filter .checkbox:checked").length)$(".store-filter-button .apply-filter").removeClass("enabled").removeClass("btn-red");$(".allStores").hide();$(".store-filter, .store-filter-button").removeClass("hide");$(".tooltip").betterTooltip();$(".store-filter .checkbox").off("ifChecked.enable ifUnchecked.enable").iCheck("uncheck");for(var b=0;b<App.pages.storeLocator.locator.filters.length;b++)$(".store-filter").find('input[value="'+App.pages.storeLocator.locator.filters[b]+'"]').iCheck("check");$(".store-filter .checkbox").on("ifChecked.enable ifUnchecked.enable",function(){var a=$(this).parents(".store-header");var b=App.pages.storeLocator.locator.filters.length;if($(".store-filter .checkbox:checked").length||b)a.find(".store-filter-button .apply-filter").addClass("btn-red").addClass("enabled");else a.find(".store-filter-button .apply-filter").removeClass("btn-red").removeClass("enabled")})}else{$(".store-list-product.list-view").show();$(".list-view-pager").show();$(".allStores").show();$(".store-filter, .store-filter-button").addClass("hide")}})},checkAuthRetailers:function(){var a=window.location.href.split("=");var b=d("result");var c=d("retailersSelected");function d(a){var b=window.location.search.substring(1);var c=b.split("&");for(var d=0;d<c.length;d++){var e=c[d].split("=");if(e[0]==a)return e[1]}}if("verizon"===b||"true"===c)$(".authorized_retailers_from_search").prop("checked",true);else $(".authorized_retailers_from_search").prop("checked",false);$(".authorized_retailers_from_search").iCheck()},populateCityListUrl:function(){var a,b,c,d;b=$("#cityList li a");d=$(".authorized_retailers_from_search").is(":checked");if(d)a="verizon";else a="all";for(var e=0;e<b.length;e++){c=b[e].getAttribute("href");b[e].setAttribute("href",c+"?result="+a)}},storeFilterAction:function(){var a=function(){var a=App.pages.storeLocator.locator.filters.length;if(a>0)$(".btnFilter").html("<span>filters ("+a+')<span class="caret"></span></span>');else $(".btnFilter").html('<span>filters (0)<span class="caret"></span></span>')};$(".store-filter .checkbox").on("ifChecked",function(){a()});$(".store-filter .checkbox").on("ifUnchecked",function(){a()});$(".store-filter-button .clear").click(function(a){a.preventDefault();$(".store-filter .checkbox").iCheck("uncheck")});$(".store-filter-button .close-filter, .store-filter .close-button").click(function(b){b.preventDefault();a();$(".store-filter, .store-filter-button").addClass("hide");$(".store-list-product.list-view").show();$(".list-view-pager").show();$(".allStores").show();if(!$(".store-list-product.details-view").is(":hidden"))$(".store-list-product.details-view").hide()});var b=this;$(".store-filter-button .apply-filter").click(function(c){var d=App.pages.storeLocator.locator.filters.length;if(!$(".store-filter .checkbox:checked").length&&!d)return false;c.preventDefault();if(!$(".store-list-product.details-view").is(":hidden"))$(".store-list-product.details-view").hide();App.pages.storeLocator.locator.filters=[];$(".store-filter .checkbox").each(function(){if($(this).is(":checked")&&!$(this).hasClass("authorized_retailers"))App.pages.storeLocator.locator.filters.push($(this).val())});if($(".authorized_retailers").is(":checked"))b.resultType="all";else b.resultType="verizon";if($(".store-filter .method-list").eq(1).find(".checkbox").is(":checked"))b.resultType.resultType="verizon";else b.resultType.resultType="all";if(0==$(".store-filter .checkbox:checked").size())b.resultType="all";b.populateMapData();b.showStoresList();b.showStores();$(".store-filter, .store-filter-button").addClass("hide");$(".store-list-product.list-view").show();$(".list-view-pager").show();$(".allStores").show();b.listSlider();a()})},storeSearch:function(){var a=$("#showStoreSuggestion").val();if(a&&"N"==a){$("#store-search").typeahead({name:"StoreSearch",local:[],remote:{url:"/vzw/rest/storelocatorTypeAheadJson.jsp?proximitySearchStr=%QUERY&authRetailers=true",async:false,filter:function(a){var b=[];if(null!=a)for(i=0;i<a.stores.length;i++)b.push(a.stores[i].address);return b}},limit:3,minLength:3,header:['<div class="searchResult clearfix">','<div class="pull-left">','<div class="user-input">','<label class="signup.big show-content">','<input type="checkbox" value="authorized_retailers" class="checkbox authorized_retailers_from_search">Include Authorized Retailers',"</label>",'<span data-tooltip="Non-Verizon stores and chains that provide Verizon Wireless devices and services." class="cart-box-down blue tooltip"></span>',"</div>","</div>",'<div class="pull-right"><a href="#" class="search_show_hide">Hide</a></div>',"</div>"].join("")}).on("typeahead:selected",function(){$("form.search").submit()}).on("keyup",function(){$(".authorized_retailers_from_search").iCheck();$(".tooltip").betterTooltip();if(0!==$(this).val().length)$("div.store-locator-search .btn-clear").removeClass("hidden");else $("div.store-locator-search .btn-clear").addClass("hidden")});$("#store-search").blur(function(){if(""!==$(".tt-dropdown-menu").html())$(".tt-dropdown-menu").show()});$("body.store-locator").click(function(a){$(".tt-dropdown-menu").hide()})}$("div.store-locator-search .btn-clear").click(function(){$(this).addClass("hidden");$(".authorized_retailers_from_search").iCheck("uncheck");$("#store-search").val("").trigger("input")});$("div.store-locator-search").click(function(a){var b=$(a.target);if(b.hasClass("search_show_hide"))if("Hide"===$(".search_show_hide").html()){$("div.store-locator-search .tt-suggestions").hide();$(".search_show_hide").html("Show")}else{$("div.store-locator-search .tt-suggestions").show();$(".search_show_hide").html("Hide")}if(b.parent().hasClass("tt-cl")||b.hasClass("btn-submit"))return true;else return false});$(".authorized_retailers_from_search").iCheck()},storeSearchAction:function(){var a=this;var b=$("#showStoreSuggestion").val();if(b&&"N"==b)$(".authorized_retailers_from_search").on("ifChecked",function(a){a.preventDefault();$(".tt-dropdown-menu").show()}).on("ifUnchecked",function(a){a.preventDefault();$(".tt-dropdown-menu").show()});else{$(".authorized_retailers_from_search").on("ifChecked",function(a){a.preventDefault()}).on("ifUnchecked",function(a){a.preventDefault()});if($(".tt-dropdown-menu .icheckbox").hasClass("checked")){vzwSc.setPageName("/desktop store/store locator/results");vzwSc.trackLink("Include Authorized Retailers")}}$(".modal-content-wrapper .not-allow, .modal-content-wrapper .close").on("click",function(){$(".modal-content-wrapper .close-button").trigger("click")})},getcurrentLocation:function(a){var b=this,c;if(navigator.geolocation)navigator.geolocation.getCurrentPosition(function(d){var e=new google.maps.Geocoder;b.myLat=parseFloat(d.coords.latitude).toFixed(6);b.myLng=parseFloat(d.coords.longitude).toFixed(6);b.myLatLng=new google.maps.LatLng(b.myLat,b.myLng);e.geocode({latLng:b.myLatLng},function(d,e){if(e===google.maps.GeocoderStatus.OK){var f="";$.each(d[0].address_components,function(a,b){if("street_number"===b.types[0])f+=b.long_name;if("route"===b.types[0])f+=" "+b.long_name+", ";if("administrative_area_level_2"===b.types[0])f+=b.long_name+", ";if("administrative_area_level_1"===b.types[0])f+=b.short_name});b.currentLocation=$.trim(f);if(a)document.location="/stores/storesearchresults/?allow=1&result=all&q="+encodeURIComponent(b.currentLocation)+"&lat="+b.myLat+"&long="+b.myLng}c=true})},function(a){if(a&&a.code)if(1===a.code)$(".inputBtnCombo .geoLocationErrorMsg").html("User Location could not be retreived");else $(".inputBtnCombo .geoLocationErrorMsg").html(a.message);c=false},{timeout:3e4,enableHighAccuracy:true,maximumAge:75e3});$(".tt-suggestions .tt-cl").on("click",function(a){if(!c){var d=vzwSc.getProperty("pageName");var e=function(){var a=App.metrics.getModalPagename("/geo desabled");var b={prop11:"",prop13:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var f=function(){vzwSc.setPageName(d)};App.helpers.modal('<div class="cart-full-wrapper store-search-error clearfix"><p>You have denied this site to use your browser\'s geolocation services. Please go to your settings and re-enable it to use the location services on this site again.</p></div>',{type:"colorbox",close:"icon"},e,f)}else $("#store-search").val(b.currentLocation).trigger("input")})},Label:function(a){this.setValues(a);var b=this.span=document.createElement("span");b.style.cssText="position: relative; left: 14px; top: 7px; color:#000000;font-family: NeueHaasGroteskTextBold;font-size: 12px;font-weight:bold;";var c=this.div=document.createElement("div");c.appendChild(b);c.style.cssText="position: absolute; display: none"},calculateDistance:function(a){var b=new google.maps.LatLng(this.searchLatlng.lat,this.searchLatlng.lng);return(.000621371192*google.maps.geometry.spherical.computeDistanceBetween(b,a)).toFixed(2)},landingPageAction:function(){var a=this;$(".search-tip").removeClass("hidden");$(".search-close-btn").click(function(){$(".search-tip").addClass("hidden")});var b=$("#showStoreSuggestion").val();if(b&&"N"==b)$(".authorized_retailers_from_search").on("ifChecked",function(a){a.preventDefault();$(".tt-dropdown-menu").show()}).on("ifUnchecked",function(a){a.preventDefault();$(".tt-dropdown-menu").show()});else $(".authorized_retailers_from_search").on("ifChecked",function(a){a.preventDefault()}).on("ifUnchecked",function(a){a.preventDefault()});$("input#store-search").on("focus",function(){if("undefined"===typeof google)App.helpers.loadGoogleMapAPI("googleApiCallback");if(!$("form.store-search").find(".search-tip").hasClass("hidden"))$("form.store-search").find(".search-tip").addClass("hidden")});$(".store-search, .store-search-modal, .modal-container .store-search").on("submit",function(b){b.preventDefault();var c=$(this).hasClass("workshop-search")?"/vzw/stores/workshopsresults/?Esp":"/vzw/stores/storesearchresults/?";var d="";if($(this).hasClass("workshop-search")){c="/vzw/stores/workshopsresults/?esp_courses="+($(".esp_courses").is(":checked")?true:false)+"&";d="workshops"}if($(this).hasClass("appointments-search")){c="/vzw/stores/storesearchresults/?";d="appointments"}var e=$(".authorized_retailers_from_search").is(":checked")?"verizon":"all";var f=$("#store-search").val();a.addressValidation(f,e,c,d)});$(".modal-content-wrapper .not-allow, .modal-content-wrapper .close").on("click",function(){$(".modal-content-wrapper .close-button").trigger("click")});$(".modal-content-wrapper .allow").on("click",function(){document.location="/vzw/storelocator/store-list-result.jsp?allow=1&result=verizon&q="+encodeURIComponent(a.currentLocation)+"&mylat="+a.myLat+"&mylng="+a.myLng})},addressValidation:function(a,b,c,d){var e=this;var f=true;var g=/[^A-Za-z0-9\s#&()\/.,;:'-]/;if(""==a){var h=function(){var a=App.metrics.getModalPagename("/search empty error");var b={prop11:"",prop13:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var i=function(){vzwSc.setPageName(j)};App.helpers.modal($("#store-locator-search-empty-error").html(),{type:"colorbox",close:"hide"},h,i)}else if(g.test(a)||a.length>99){$(".search-term").text(a);var j=vzwSc.getProperty("pageName");var h=function(){var a=App.metrics.getModalPagename("/search error");var b={prop11:"",prop13:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var i=function(){vzwSc.setPageName(j)};App.helpers.modal($(".store-locator-search-error").html(),{type:"colorbox",close:"hide"},h,i)}else{a=$.trim(a);if("undefined"===typeof google)return;var k=new google.maps.Geocoder;k.geocode({address:a,componentRestrictions:{country:"US"}},function(e,f){if(f===google.maps.GeocoderStatus.OK){var g=e[0].address_components;var h=e[0].formatted_address.replace(", USA","");var i=null;var j=null;var k=null;var l=null;var m=null;var n=null;var o=null;var p=null;var q=null;var r=null;var s=e[0].geometry.location.lat();var t=e[0].geometry.location.lng();var u=a.toLowerCase();$(g).each(function(a,b){if("locality"===b.types[0]||"neighborhood"===b.types[0]){j=b.long_name;n=b}else if("administrative_area_level_1"===b.types[0]){i=b.long_name;p=b}else if("administrative_area_level_2"===b.types[0]){k=b.long_name;o=b}else if("postal_code"===b.types[0]){l=b.long_name;r=b}else if("country"===b.types[0]){m=b.long_name;q=b}});if(null!=p&&"administrative_area_level_1"===p.types[0])if(null!=n){if("washington"===u){i=a;j=null}if("new york"===u||"ny"===u)j=null}if(null!=p&&"administrative_area_level_1"===p.types[0]&&null!=o&&"administrative_area_level_2"===o.types[0]&&null===n){var s=e[0].geometry.location.lat();var t=e[0].geometry.location.lng();h=s+","+t;var v=true;var w=o.long_name+", "+p.long_name;i=null}var x=vzwSc.getProperty("pageName");var y=function(){var a=App.metrics.getModalPagename("/search suggest");var b={prop11:"",prop13:"",prop26:"",prop26:"",eVar16:"",prop16:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var z=function(){vzwSc.setPageName(x)};if(null!=i&&null===j&&"United States"===m&&isNaN(a)){i=i.replace(" ","-");if("workshops"==d){var s=e[0].geometry.location.lat();var t=e[0].geometry.location.lng();document.location=c+"allow=1&lat="+s.toFixed(7).slice(0,-1)+"&long="+t.toFixed(7).slice(0,-1)+"&result="+b+"&q="+encodeURIComponent(i)}else if("appointments"===d){var s=e[0].geometry.location.lat();var t=e[0].geometry.location.lng();document.location=c+"allow=1&lat="+s.toFixed(7).slice(0,-1)+"&long="+t.toFixed(7).slice(0,-1)+"&type="+d+"&result="+b+"&q="+encodeURIComponent(i)}else{var A=$(".authorized_retailers_from_search").is(":checked");document.location="/vzw/stores/"+i.toLowerCase()+"?retailersSelected="+A}}else if(v){$(".search-term").text(w);$(".yes").attr("href",c+"allow=1&result="+b+"&q="+encodeURIComponent($.trim(w))+"&lat="+s.toFixed(7).slice(0,-1)+"&long="+t.toFixed(7).slice(0,-1));App.helpers.modal($(".store-locator-search-suggest").html(),{type:"colorbox",close:"hide"},y,z)}else if(e.length>1){$(".search-term").text(h);var s=e[0].geometry.location.lat().toFixed(7).slice(0,-1);var t=e[0].geometry.location.lng().toFixed(7).slice(0,-1);$(".yes").attr("href",c+"allow=1&result="+b+"&q="+encodeURIComponent($.trim(h))+"&lat="+s+"&long="+t);App.helpers.modal($(".store-locator-search-suggest").html(),{type:"colorbox",close:"hide"},y,z)}else{var s=e[0].geometry.location.lat();var t=e[0].geometry.location.lng();if("appointments"===d)document.location=c+"allow=1&lat="+s.toFixed(7).slice(0,-1)+"&long="+t.toFixed(7).slice(0,-1)+"&type="+d+"&result="+b+"&q="+encodeURIComponent(i);else document.location=c+"allow=1&lat="+s.toFixed(7).slice(0,-1)+"&long="+t.toFixed(7).slice(0,-1)+"&result="+b+"&q="+encodeURIComponent(a)}}else{var x=vzwSc.getProperty("pageName");var y=function(){var a=App.metrics.getModalPagename("/search error");var b={prop11:"",prop13:"",prop26:"",prop26:"",eVar16:"",prop16:""};App.helpers.observer.publish("trackPageView",{pageName:a,props:b})};var z=function(){vzwSc.setPageName(x)};$(".search-term").text(a);var B=0;if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1)B=5e3;setTimeout(function(){App.helpers.modal($(".store-locator-search-error").html(),{type:"colorbox",close:"hide"},y,z)},B)}})}},addressDifferent:function(a,b){b=b.split(",")[0];a=a.toLowerCase();b=b.toLowerCase();a=a.replace(/'/g,"");b=b.replace(/'/g,"");a=a.replace(/\W/g," ");b=b.replace(/\W/g," ");a=a.replace(/\s+/g," ");b=b.replace(/\s+/g," ");awords=a.split(" ");bwords=b.split(" ");var c=false;for(var d=0;d<bwords.length;d++)if(this.standardize(awords[d])!==this.standardize(bwords[d]))c=true;return c},standardize:function(a){var b=[["road","rd"],["street","st"],["avenue","ave"],["av","ave"],["drive","dr"],["saint","st"],["north","n"],["south","s"],["east","e"],["west","w"],["expressway","expy"],["parkway","pkwy"],["terrace","ter"],["turnpike","tpke"],["highway","hwy"],["lane","ln"]];for(var c=0;c<b.length;c++)if(a===b[c][0])a=b[c][1];return a}};if("undefined"!==typeof google)App.pages.storeLocator.locator.Label.prototype=new google.maps.OverlayView;App.pages.storeLocator.locator.Label.prototype.onAdd=function(){this.getPanes().overlayImage.appendChild(this.div);var a=this;this.listeners=[google.maps.event.addListener(this,"position_changed",function(){a.draw()}),google.maps.event.addListener(this,"text_changed",function(){a.draw()}),google.maps.event.addListener(this,"zindex_changed",function(){a.draw()})]};App.pages.storeLocator.locator.Label.prototype.onRemove=function(){this.div.parentNode.removeChild(this.div);for(var a=0,b=this.listeners.length;a<b;++a)google.maps.event.removeListener(this.listeners[a])};App.pages.storeLocator.locator.Label.prototype.draw=function(){var a=this.getProjection();if(!a)return;var b=a.fromLatLngToDivPixel(this.get("position"));if(!b)return;var c=this.div;c.style.left=b.x+"px";c.style.top=b.y+"px";c.style.display="block";c.style.zIndex=this.get("zIndex");this.span.innerHTML=this.get("text").toString();this.span.className="seq_item_"+this.get("text").toString();this.span.className+=" "+this.get("icon_class").toString();if(this.get("text")>=100)$(".seq_item_"+this.get("text")).css("left","8px");else if(this.get("text")>=10)$(".seq_item_"+this.get("text")).css("left","11px");else $(".seq_item_"+this.get("text")).css("left","14px")};App.pages.storeLocator.locator.workshopLandingAction=function(){function a(){$(".modal-container").find('input[type="checkbox"]').iCheck("");$(".modal-container .store-search-modal").off().on("submit",function(a){a.preventDefault();var b=$(this).data("workshop-type");var c=$(".store_my_loc").is(":checked")?true:false,d="";if(b)d="/vzw/stores/storesearchresults/?appointmentName="+b+"&";else d="/vzw/stores/storesearchresults/?";var e="";var f="appointments";var g=$(".modal-container #zip-search").val();App.pages.storeLocator.locator.addressValidation(g,e,d,f)})}$("a.see-more").on("click",function(b){var c=$(this).data("workshop-type");$(".see-more-zip-modal").find(".workshop-search-modal").attr("data-workshop-type",c);var d={easyclose:"yes"};App.helpers.modal($(".see-more-zip-modal").html(),{type:"colorbox",close:"hide"},a)});var b=$(".workshop-cat .see-more-desc");if($(".workshop-cat>col").length>=4)$(".workshop-cat").slick({dots:true,infinite:true,speed:300,useTransform:false,slidesToShow:4,slidesToScroll:1})};App.pages.storeLocator.locator.workshopsList={filterType:"All",init:function(){this.setSearchTerm();this.filterType=$("#workshop-type-select").val();$("#workshop-type-select").selectpicker("refresh");this.listWorkshops(this.filterType);this.changeFilter();this.checkAvailability()},decodeHtml:function(a){var b=document.createElement("textarea");b.innerHTML=a;return b.value},setSearchTerm:function(){var a=window.location.search;a=a.split("&q=");a=a[1];a=a.split("&");$("#store-search").val(a[0])},listWorkshops:function(a){var b=this;var c=Hogan.compile($("#workshops-info").html());$(".workshop-results-wrapper").html("");$(".easyPaginateNav").remove();$.each(workshopsList,function(d,e){if("All"!=a&&a!=e["workshopType"]);else{e.title=b.decodeHtml(e.title);e.description=b.decodeHtml(e.description);$(".workshop-results-wrapper").append(c.render(e))}});if($(".workshop-results-wrapper > div").length>=6){$(".workshop-results-wrapper").easyPaginate({paginateElement:"div.workshop-result",elementsPerPage:3,effect:"fade"});$(".easyPaginateNav a.prev").html("Previous");$(".easyPaginateNav a.next").html("Next")}},changeFilter:function(){var a=this;$("#workshop-type-select").on("change",function(){a.listWorkshops($(this).val())})},checkAvailability:function(){$(".workshop-results-wrapper").on("click",".checkAvail",function(){var a=$(this).attr("data-submit-val");var a=a.split("|");$("#selectWorkShopForm #workshopId").val(a[0]);$("#selectWorkShopForm #workShopCategoryCode").val(a[1]);$("#selectWorkShopForm #storeIds").val(a[2]);$("#selectWorkShopForm #language").val(a[3]);$("#selectWorkShopForm #selectWorkShop").trigger("click")});$("#selectWorkShopForm #selectWorkShop").on("click",function(){})},preparePageNation:function(){}};App.pages.storeLocator.locator.appointmentAction=function(){if($("#lookingfor>option").length>1){$("#lookingfor").prop("selectedIndex",0);$("#lookingfor").selectpicker("refresh");$('.workshop-finder-form-wrapper input[type="submit"]').prop("disabled",true).addClass("disabled")}else $('.workshop-finder-form-wrapper input[type="submit"]').prop("disabled",true).addClass("disabled");$("#lookingfor").on("change",function(a){if($("#lookingfor").prop("selectedIndex"))$('input[type="submit"]').prop("disabled",false).removeClass("disabled");else $('input[type="submit"]').prop("disabled",true).addClass("disabled");App.helpers.observer.publish("trackEvent","Make Appoinment:"+$("#lookingfor option:selected").text())})};App.pages.storeLocator.locator.storeCityListing=function(){$("html, body").animate({scrollTop:$("#cityStateLinks").offset().top},0);$("#cityList").listnav({noMatchText:"No cities found.",initLetter:"a",includeNums:false});$("#cityList-nav .ln-letters a").click(function(a){a.preventDefault()})};function googleApiCallback(){}function timeToMil(a){var b="";var c=a.substr(6,2);var d=a.substr(0,2);var e=parseInt(a.substr(1,1));if("AM"==c)if("12"==d)b="00";else b=d;else if("PM"==c)if("12"==d)b=d;else{e+=12;b=""+e}return b+a.substr(2,3)}function buildSchedule(a,b,c){var d=new Array("Mon","Tue","Wed","Thu","Fri","Sat","Sun");var e=new Array("Mo","Tu","We","Th","Fr","Sa","Su");var f=new Array("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday");var g=new Array;var h="";var l="";var m=new Array;var n="";var o="";i=0;j=0;k=0;count=0;scount=0;dayList="";commaString="";var p=0;for(i=0;i<=a.length-1;i++){p=(a[i].match(/CLOSED/gi)||[]).length;if(p>1)a[i]="CLOSED"}for(i=0;i<b.length;i++)if("null"!=b[i]&&""!=b[i])m[i]="true";else m[i]="false";for(i=0;i<=a.length-1;i++)if(null==a[i]||""==a[i]){a[i]="CLOSED";g[i]="CLOSED"}else{a[i].toUpperCase();h=a[i];a[i]=SLfmtHours1(a[i].trim());l=timeToMil(h.substr(0,8))+"-"+timeToMil(h.substr(9,8));g[i]=l}for(i=0;i<=a.length-1;i++){scount=0;if("true"==m[i]){n+="<div><span>"+f[i]+":</span>"+a[i]+"</div>";q(d,i,a)}else{for(j=i+1;j<=a.length-1;j++)if(a[i]==a[j]){count++;q(d,j,a)}else break;if(0==count){n+="<div><span>"+f[i]+":</span>"+a[i]+"</div>";q(d,i,a)}else{for(k=i;k<i+count;k++)if("true"==m[k])scount++;dayList="";commaString="";for(k=i;k<=i+count;k++){dayList=dayList+commaString+e[k];commaString=", ";q(d,k,a)}if(0==scount){n+="<div><span>"+d[i]+"-"+d[i+count]+":</span>"+a[i+count]+"</div>";q(d,i,a);i+=count;count=0}else for(k=i;k<i+count;k++)if("true"==m[k]){i+=k;n+="<div><span>"+d[k]+":</span>"+a[k]+"</div>";q(d,k,a);count=0;break}else{n+="<div><span>"+d[k]+":</span>"+a[k]+"</div>";q(d,k,a)}}}}n=n.replace(/:00/g," ");if(c)return n;else document.getElementById("special_hour").innerHTML=n+document.getElementById("special_hour").innerHTML;function q(a,b,c){var d=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat");var e=new Date;var f=e.getDay();var g="";var h="";if(a[b]==d[f]){g=c[b];timeTodayWords=g;if($("#timeOffset").length>0){var i=$("#timeOffset").val()||false;try{if(g.toUpperCase().indexOf("CLOSED")<0){timeTodayWords=dynamicTime(g,i);setInterval(function(){timeTodayWords=dynamicTime(g,i);document.getElementById("todayTime").innerHTML=timeTodayWords},6e4)}}catch(a){}}h=c[(b+1)%7];if(document.getElementById("todayTime")){document.getElementById("todayTime").innerHTML=timeTodayWords;h=h.replace(/:00/g," ");document.getElementById("tomorrowTime").innerHTML=h}}}}function dynamicTime(a,b){function c(a,b){return parseInt(a)+parseInt(b)}function d(a,b){return parseInt(a)-parseInt(b)}var e=(new Date).getTimezoneOffset();currentOffsetTime=e;var f=parseInt(60*b/60);var g=parseInt(60*b%60);storeOffsetTime=c(60*f,g);a=a.replace(/\s/g,"")||"";if("undefined"!==typeof a&&""!==a){var h=a.split("AM")[0].split(":")[0];var i=a.split("AM")[0].split(":")[1];var j=parseInt(a.split("-")[1].split("PM")[0].split(":")[0])+12;var k=a.split("-")[1].split("PM")[0].split(":")[1];closingTime=c(60*j,k);openingTime=c(60*h,i);var l=new Date;var m=l.getHours();var n=l.getMinutes();currentTime=c(60*m,n);currentTime=c(currentTime,storeOffsetTime+currentOffsetTime);if(currentTime<0)currentTime=c(1440,currentTime);if(currentTime>=closingTime||d(openingTime,currentTime)>119)return" Currently Closed";else if(d(openingTime,currentTime)<119&&d(openingTime,currentTime)>0)if(d(openingTime,currentTime)<60)return" Opens in "+d(openingTime,currentTime)+" minutes";else return" Opens in "+parseInt(d(openingTime,currentTime)/60)+" hour "+d(openingTime,currentTime)%60+" minutes";else if(d(currentTime,openingTime)>=0&&d(closingTime,currentTime)>119)if("00"!==k)return" Open until "+a.split("-")[1].split("PM").join(" PM");else return" Open until "+(j-12)+" PM";else if(d(closingTime,currentTime)<119&&d(closingTime,currentTime)>=0)if(d(closingTime,currentTime)<60)return" Closes in "+d(closingTime,currentTime)+" minutes";else return" Closes in "+parseInt(d(closingTime,currentTime)/60)+" hour "+d(closingTime,currentTime)%60+" minutes"}}function GetScheduleStr(a,b){var c=new Array("Mon","Tue","Wed","Thu","Fri","Sat","Sun");var d=new Array("Mo","Tu","We","Th","Fr","Sa","Su");var e=new Array;var f="";var g="";var h=new Array;var l="";var m="";i=0;j=0;k=0;count=0;scount=0;dayList="";commaString="";for(i=0;i<b.length;i++)if(""!=b[i])h[i]="true";else h[i]="false";for(i=0;i<=a.length-1;i++)if(null==a[i]||""==a[i]){a[i]="CLOSED";e[i]="CLOSED"}else{a[i].toUpperCase();f=a[i];g=timeToMil(f.substr(0,8))+"-"+timeToMil(f.substr(9,8));e[i]=g}for(i=0;i<=a.length-1;i++){scount=0;if("true"==h[i])l+=c[i]+":"+a[i]+"%0D%0A";else{for(j=i+1;j<=a.length-1;j++)if(a[i]==a[j])count++;else break;if(0==count)l+=c[i]+":"+a[i]+"%0D%0A";else{for(k=i;k<i+count;k++)if("true"==h[k])scount++;dayList="";commaString="";for(k=i;k<=i+count;k++){dayList=dayList+commaString+d[k];commaString=", "}if(0==scount){l+=c[i]+"-"+c[i+count]+":"+a[i+count]+"%0D%0A";i+=count;count=0}else for(k=i;k<i+count;k++)if("true"==h[k]){i+=k;l+=c[k]+":"+a[k]+"%0D%0A";count=0;break}else l+=c[k]+":"+a[k]+"\n"}}}return l}var mapJsonData=[{address:"30 Canal St",appointmentServices:["Billing/Account Inquiries","Device Troubleshooting","Sales"],category:{lifestyle_concept_store:"Lifestyle Concept Store",workshops:"Workshops"},city:"New York",lat:"40.7144396",lng:"-73.99056259999998",openingHours:{fri:"10:00AM - 6:00PM",mon:"10:00AM - 6:00PM",sat:"9:00AM - 5:00PM",sun:"10:00AM - 6:00PM",thu:"10:00AM - 6:00PM",tue:"10:00AM - 6:00PM",wed:"10:00AM - 6:00PM"},phone:"(917)234-1630",premiumDetails:"html data",premiumRetailer:0,rating:"4",review:"I attended their Android workshop and I loved it...",state:"NY",storeFeatures:["In-Store Pickup Available","Workshops","Hablamos Espanol"],storeUrl:"https://google.com",title:"Canal Street Store",totalReviews:"21",zip:"10004"},{address:"30 Reade St",appointmentServices:[],category:{in_store_pickup_order_destination:"In-Store Pickup Available",lifestyle_concept_store:"Lifestyle Concept Store"},city:"New York",lat:"",lon:"",openingHours:{fri:"10:00AM - 6:00PM",mon:"10:00AM - 6:00PM",sat:'<strong class="color-red">CLOSED</strong>',sun:'<strong class="color-red">CLOSED</strong>',thu:"10:00AM - 6:00PM",tue:"10:00AM - 6:00PM",wed:"10:00AM - 6:00PM"},phone:"(917)234-1630",premiumDetails:"html data",premiumRetailer:0,rating:"4",review:"I attended their Android workshop and I loved it...",state:"NY",storeFeatures:["In-Store Pickup Available","Workshops","Hablamos Espanol"],storeUrl:"",title:"Best Buy Canal Street Premium Multi Store",totalReviews:"21",zip:"10004"},{address:"257 Greenwich St",appointmentServices:["Billing/Account Inquiries","Device Troubleshooting","Sales"],category:{billing_account_inquiries:"Billing/Account Inquiries",in_store_pickup_order_destination:"In-Store Pickup Available"},city:"New York",lat:"",lon:"",openingHours:[],phone:"(917)234-1630",premiumDetails:"html data",premiumRetailer:1,rating:"4",review:"I attended their Android workshop and I loved it...",state:"NY",storeFeatures:["In-Store Pickup Available","Workshops","Hablamos Espanol"],storeUrl:"https://google.com",title:"Best Buy Lexington Avenue",totalReviews:"21",zip:"10007"},{address:"120 E Houston St",appointmentServices:[],category:{billing_account_inquiries:"Billing/Account Inquiries",hablamos_espanol:"Hablamos Espanol"},city:"New York",lat:"",lon:"",openingHours:{fri:"10:00AM - 6:00PM",mon:"10:00AM - 6:00PM",sat:'<strong class="color-red">CLOSED</strong>',sun:"10:00AM - 6:00PM",thu:"10:00AM - 6:00PM",tue:"10:00AM - 6:00PM",wed:"10:00AM - 6:00PM"},phone:"(917)234-1630",premiumDetails:"html data",premiumRetailer:0,rating:"4",review:"I attended their Android workshop and I loved it...",state:"NY",storeFeatures:["In-Store Pickup Available","Workshops","Hablamos Espanol"],storeUrl:"",title:"Canal Street Muhu",totalReviews:"21",zip:"10004"},{address:"581 Boardway",appointmentServices:["Billing/Account Inquiries","Device Troubleshooting","Sales"],category:{hablamos_espanol:"Hablamos Espanol",workshops:"Workshops"},city:"New York",lat:"",lon:"",openingHours:{fri:"10:00AM - 6:00PM",mon:"10:00AM - 6:00PM",sat:"9:00AM - 5:00PM",sun:'<strong class="color-red">CLOSED</strong>',thu:"10:00AM - 6:00PM",tue:"10:00AM - 6:00PM",wed:"10:00AM - 6:00PM"},phone:"(917)234-1630",premiumDetails:"html data",premiumRetailer:0,rating:"4",review:"I attended their Android workshop and I loved it...",state:"NY",storeFeatures:["In-Store Pickup Available","Workshops","Hablamos Espanol"],storeUrl:"https://google.com",title:"Soho Store at Broadway",totalReviews:"21",zip:"10012"}];var j=1;(function(a){a.fn.listSplit=function(b){var c={colNumber:5,direction:"vertical"};this.each(function(){var d=a(this);var e=a.extend(c,b);var f=a(this).children("li").size();var g=Math.ceil(f/e.colNumber);var h=a(this).attr("class");for(i=1;i<=e.colNumber;i++){if(1==i)a(this).addClass("listCol1").wrap('<div class="listContainer'+j+'"></div>');else if(a(this).is("ul"))a(this).parents(".listContainer"+j).append('<ul class="listCol'+i+'"></ul>');a(".listContainer"+j+" > ul").addClass(h)}var k=0;var l=1;var m=0;if("vertical"==e.direction){a(this).children("li").each(function(){k+=1;if(k>g*(e.colNumber-1))a(this).parents(".listContainer"+j).find(".listCol"+e.colNumber).append(this);else if(k<=g*l)a(this).parents(".listContainer"+j).find(".listCol"+l).append(this);else{a(this).parents(".listContainer"+j).find(".listCol"+(l+1)).append(this);l+=1}});a(".listContainer"+j).find("ul").each(function(){if(0==a(this).children().size())a(this).remove()})}else a(this).children("li").each(function(){m+=1;if(m<=e.colNumber)a(this).parents(".listContainer"+j).find(".listCol"+m).append(this);else{m=1;a(this).parents(".listContainer"+j).find(".listCol"+m).append(this)}});j+=1})}})(jQuery);$(document).ready(function(){$(".cityStateList").listSplit({colNumber:5});$(".storePageLink").off("click").on("click",function(a){a.preventDefault();a.stopPropagation();vzwSc.trackLink("SEE STORE PAGE");window.location=$(this).attr("href")});if($("#city").val()&&$("#state").val()){$("#tnt_metric .tntMETRO").html($("#city").val());$("#tnt_metric .tntSTATE").html(" "+$("#state").val())}});function closeModalNow(){$(".modal-container.colorbox.processed").css("display","none")}function SLfmtHours1(a){var b=" ";var c=[];var d=a;var e=[];if(false!==a&&"CLOSED"!=a){c=a.trim().split(" ");if(4===c.length){e=c[0].split(":");if(2===e.length)c[0]=parseInt(e[0],10)+":"+e[1];e=c[2].split(":");if(2===e.length)c[2]=parseInt(e[0],10)+":"+e[1];d=c[0]+" "+c[1]+" - "+c[2]+" "+c[3]}}return b+d}function SLfmtHours(a){var b=" ";var c=[];var d=a;var e=[];if(false!==a&&"CLOSED"!=a){c=a.trim().split(" ");if(4===c.length){e=c[0].split(":");if(2===e.length)if("00"!=e[1])c[0]=parseInt(e[0],10)+":"+e[1];else c[0]=parseInt(e[0],10);e=c[2].split(":");if(2===e.length)if("00"!=e[1])c[2]=parseInt(e[0],10)+":"+e[1];else c[2]=parseInt(e[0],10);d=c[0]+" "+c[1]+" - "+c[2]+" "+c[3]}}return b+d}function removeDuplicateClosedStr(a){var b=[];try{if(false!=a){b=a.trim().split(" ");if(b.length>1&&"CLOSED"===b[0].trim().toUpperCase())return"CLOSED"}}catch(a){}return a}App.pages.storeLocator.locator.fixInputPlaceholder=function(){$("input#store-search").on("focus",function(a){$("label[for='store-search']").hide()});$("input#store-search").on("blur",function(a){var b=a.currentTarget.value;b=$.trim(b);if(b.length>0)$("label[for='store-search']").hide();else $("label[for='store-search']").show()})};$(".make-appt-submit-button.disabled").on("click",function(a){if($(this).hasClass("disabled"))a.preventDefault()});if(2===$("#lookingfor>option").length){$("#lookingfor").prop("selectedIndex",1);$("#lookingfor").selectpicker("refresh");$("a[data-id='lookingfor']").css("pointer-events","none");$("a[data-id='lookingfor'] .caret").hide();$(".make-appt-submit-button").removeClass("disabled")}$("#lookingfor").on("change",function(){selectedString=$(this).val();if(""!=selectedString)$(".make-appt-submit-button").removeClass("disabled");else $(".make-appt-submit-button").addClass("disabled")});function addEllipses(a,b,c){if(a.height()>b){if("N"!=c)a.attr("title",a.html());var d=a.html().split(/\s+/);d.push("...");do{d.splice(-2,1);a.html(d.join(" "))}while(a.height()>b)}}$(".near-stores .near-store").each(function(){$Selector=$(this).find("h4").eq(0).find("div");addEllipses($Selector,45);$Selector=$(this).find(".big-add-text span").eq(0);addEllipses($Selector,35);$Selector=$(this).find(".big-add-text span").eq(1);addEllipses($Selector,35)});$(window).load(function(){if($("#tnt_metric").length>0)$("#tnt_metric img").attr("src","http://s7.vzw.com/is/image/VerizonWireless/rootmetrics-vert-pms-flat-logo?$256x170?$&scl=1");if($("#goToPrepareVisit"))$("#goToPrepareVisit").on("click",function(){var a=$(".prepare-visit-content").closest(".sections-wrapper");$("html, body").animate({scrollTop:a.offset().top},2e3)});if($("#goToAppointment"))$("#goToAppointment").on("click",function(){var a=$("#appt-container").closest(".sections-wrapper");$("html, body").animate({scrollTop:a.offset().top},2e3)});if($("#SLSmallPromo"))$("#SLSmallPromo").click(function(a){window.top.location.href=$(a.currentTarget).find("a").attr("href")});if($("#storeTypeDirect")&&$("#storeTypeDirect").val())if("Y"===$("#storeTypeDirect").val())$("#indirectStore").hide();else $("#directStore").hide();if($(".deal-stores").length>0)setTimeout(function(){$(".workshop-slick").slick({dots:true,infinite:true,speed:300,slidesToShow:3,slidesToScroll:3});$(".deal-stores").slick({dots:false,infinite:true,speed:300,slidesToShow:4,slidesToScroll:4});$("div[aria-describedby] h3").each(function(a,b){addEllipses($(b),75)})},0);if($("#store-map-canvas").length>0&&$("#store-search").length>0&&$("#resultsPage").length>0){var a=$("#store-search").parents(".sections-wrapper").height()+$("#store-search").parents(".sections-wrapper").offset().top+40;$("html, body").animate({scrollTop:a},2e3)}if($("#workShopResultsPage").length>0)App.pages.storeLocator.locator.workshopsList.init();$(".see-all-workshops, .workshop-contents").on("click",function(a){a.preventDefault();var b=new google.maps.Geocoder;var c=$(this).attr("data-zip-code");var d=$(this);b.geocode({address:c,partialmatch:true},function(a,b){if(b===google.maps.GeocoderStatus.OK){var e=a[0].geometry.location.lat();var f=a[0].geometry.location.lng();if($(d).hasClass("see-all-workshops"))document.location="/vzw/stores/workshopsresults/?esp_courses=false&allow=1&lat="+e.toFixed(7).slice(0,-1)+"&long="+f.toFixed(7).slice(0,-1)+"&result=all&q="+c;else{var g=$(d).attr("data-info");document.location="/vzw/stores/workshopsselection/?allow=1&lat="+e.toFixed(7).slice(0,-1)+"&long="+f.toFixed(7).slice(0,-1)+"&"+g}}})});if($("#selectedAppointmentId").length>0){$("a.appt-support-link-text").addClass("hide");var b=$("#selectedAppointmentId").val();$("a.appt-support-link-text."+b).removeClass("hide")}if($(".addtocalendar").length>0){var c=f($("#startTime").val());var d=f($("#endTime").val());var e=createCalendar({data:{title:$("#title").val(),start:new Date($("#startDate").val()+" "+c),duration:30,end:new Date($("#startDate").val()+" "+d),address:$("#address").val(),description:$("#title").val()}});$(e).find("a").text("Add appointment to calendar");$(".addtocalendar").html($(e).find("a"));function f(a){if("undefined"!=a&&a.indexOf(":")<0)a=a.split(" ").join(":00 ");return a}}});App.pages.storeLocator.RegisterForWorkshopAppointment={availableSlots:4,guestCount:0,stripPhoneNumberFormatting:function(a){var b=$(a).find("#mobile");var c=b.val();c=c.replace(/\D/g,"");b.val(c)},init:function(){if(parseInt($("#availableSpots").val())>0)this.availableSlots=parseInt($("#availableSpots").val());if(this.availableSlots<2)$(".add-guest-form").hide();this.addCustomMethodsAndRules();this.validateUser();this.addOrRemoveGuests()},addCustomMethodsAndRules:function(){$("#mobile, .guestMobile").mask("(000) 000-0000");$.validator.addMethod("customPhoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^\(?([0-9]{3})\)?[-.?]?([0-9]{3})[-.?]?([0-9]{4})$/)},"Please specify a valid phone number")},validateUser:function(){var a=this;$("#workshopInfoForm").validate({ignore:".ignore, :hidden",submitHandler:function(b,c){c.preventDefault();a.validateGuests();if(1==$("#guestValid").val()){$("#mobile").unmask("(000)000-0000");location.href=$("#workshopInfoForm").attr("action").replace("#","")+"?"+$("#workshopInfoForm").serialize()}},highlight:function(a,b,c){if("radio"===a.type)this.findByName(a.name).addClass(b).removeClass(c);else $(a).addClass(b).removeClass(c);$(a).siblings(".error.success").removeClass("success")},focusCleanup:true,focusInvalid:false,rules:{fName:{required:true,alphaOnly:true,maxlength:30},lName:{required:true,alphaOnly:true,maxlength:30},email:{required:true,email:true,maxlength:80},confirmEmail:{required:{depends:function(a){return $(a).parents("form").find("input[name=email]").val().length>0}},email:true,maxlength:80,equalTo:"#email"},phone:{required:true,customPhoneUS:true},mobile:{required:true,customPhoneUS:true}},messages:{fName:"Please enter your first name",lName:"Please enter your last name",email:{required:"Please enter your email address",email:"Please enter a valid email address",maxlength:"Please enter a valid email address"},confirmEmail:{email:"Please enter a valid email address",maxlength:"Please enter a valid email address",equalTo:"Confirm email address not match"},phone:{required:"Please enter your phone number",usPhone:"Please enter a valid phone number"},mobile:{required:"Please enter your mobile phone number",phoneUS:"Please enter a valid mobile phone number"}}})},validateGuests:function(){valid=1;var a="";$("button.continue").removeClass("disabled");var b=$(".guest-info.additional").length;var c=$(".guest-info.additional").length+1;var a="";var d=[];var e=$("#firstName").val()||$("#fName").val();var f=$("#lastName").val()||$("#lName").val();var g=$("#email").val();var h=$("#mobileNum").val()||$("#mobile").val();var i=e+f+g;d.push(i);$(".guest-info.additional").each(function(e){a+=$(this).attr("id")+"=";var f=$(this).find("input").length;guestuserInfo="";$(this).find("input").each(function(b,d){if($(this).attr("id")!="guestConfirmEmail"+c&&$(this).attr("id")!="guestMobile"+c)guestuserInfo+=$(this).val();switch($(this).attr("id")){case"guestMobile"+c:$(this).unmask("(000) 000-0000");break}a+=$(this).attr("id")+":"+$(this).val();if(b<f-1)a+="|"});if(e<b-1)a+=",";if(d.indexOf(guestuserInfo)<0)d.push(guestuserInfo);else{valid=0;$(".guestMobile"+c).mask("(000) 000-0000");if($(this).find("p.error-guest").length<=0)$(this).append('<p class="error-guest" style="color:#cd040b">You have entered the same registration info for more than one user. Please re-enter.</p>')}});$('input[name="guestRegistration"]').val(a);$('input[id="guestValid"]').val(valid)},addOrRemoveGuests:function(){var a=this;$(".aditional-guest-wrapper").on("click",".add-guest-form, .add-another-guest",function(b){b.preventDefault();var c=$(".guest-info.additional").length+1;if(a.availableSlots>c){var d=$(".guest-info.hidden").clone();$(d).removeClass("hidden").addClass("additional");$(d).attr("id","guest"+c);$(d).insertBefore($(".aditional-guest-wrapper"));$(d).find("input").each(function(){$(this).attr("id",$(this).attr("id")+c);$(this).attr("name",$(this).attr("name")+c);switch($(this).attr("name")){case"addGuestFName"+c:$(this).rules("add",{required:true,messages:{required:"Please enter guest first name"}});break;case"addGuestLName"+c:$(this).rules("add",{required:true,messages:{required:"Please enter guest last name"}});break;case"addGuestEmail"+c:$(this).rules("add",{required:true,maxlength:80,email:true,messages:{required:"Please enter guest email address",noPlaceholder:"Please enter your email address",maxlength:"Please enter a valid email address",email:"Please enter a valid email address"}});break;case"addGuestConfirmEmail"+c:$(this).rules("add",{maxlength:80,required:{depends:function(a){return $(a).parents(".additional").find('input[id="guestEmail'+c+'"]').val().length>0}},equalTo:"#guestEmail"+c,messages:{required:"Please enter guest email address",noPlaceholder:"Please enter your email address",maxlength:"Please enter a valid email address",email:"Please enter a valid email address",equalTo:"Confirm email address not match"}});break;case"addGuestMobileNumber"+c:$(this).rules("add",{customPhoneUS:[true,"Please enter a valid phone number"]});break}});$(".guestMobile").mask("(000) 000-0000");if(c+1===a.availableSlots)$(this).hide()}});$("#storeLocator").on("click",".guest-info.additional a.close",function(){$(this).parents(".guest-info.additional").remove();for(i=0;i<$(".guest-info.additional").length;i++){var b=$(".guest-info.additional")[i];$(b).attr("id","guest"+i)}if($(".guest-info.additional").length+1<a.availableSlots)$(".add-guest-form").show()})},validateField:function(a,b){switch(b){case"guestMobile":return/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/.test(a);break;case"guestFname":return a.length>0;break;case"guestLname":return a.length>0;break;case"guestEmail":return/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a);break;case"guestConfirmEmail":var c=$(b).prev().val();return $(b).val()==c;break}},submitRegistration:function(){}};sessionClose=function(){if($("#sessionTimeOutRedirectionURL").length>0)document.location=$("#sessionTimeOutRedirectionURL").val();else window.location.reload(true)};var IDLE_TIMEOUT=$("#maxTimeInterval").val()||1620;var _idleSecondsCounter=0;document.onclick=function(){_idleSecondsCounter=0};document.onmousemove=function(){_idleSecondsCounter=0};document.onkeypress=function(){_idleSecondsCounter=0};window.setInterval(CheckIdleTime,1e3);function CheckIdleTime(){_idleSecondsCounter++;var a=document.getElementById("SecondsUntilExpire");if(a)a.innerHTML=IDLE_TIMEOUT-_idleSecondsCounter+"";if(_idleSecondsCounter>=IDLE_TIMEOUT)if($("#sessionTimeOut").length>0)App.helpers.modal($("#sessionTimeOut").html(),{type:"colorbox",close:"hide"})}App.pages.storeLocator.RegisterForWorkshopAppointment.init();if("undefined"==typeof apptList)apptList={};App.pages.storeLocator.locator.smsoption={init:function(){this.addCustomMethodsAndRules();this.smsPopUp()},smsPopUp:function(){var a=this;$(".sms-option").on("click",function(){var b=a.openCallback;App.helpers.modal($(".sms-modal").html(),{type:"colorbox"},b)})},openCallback:function(){$(".modal-content #mobile").mask("(000) 000-0000");$(".modal-content #carrierSelect").selectpicker();$("p.messagContainer").addClass("hide");$(".modal-content #carrierSelect").on("change",function(){if(""!=$(this).val())$("label[for='carrierSelect']").hide();else $("label[for='carrierSelect']").show()});$(".modal-content #smsForm").validate({rules:{mobile:{required:true,customPhoneUS:true},carrierSelect:{required:{depends:function(a){return""==$("#carrierSelect").val()}}}},messages:{mobile:"Please specify a valid phone number",carrierSelect:"Please Select Carrier of the mobile number"},submitHandler:function(a,b){b.preventDefault();var c=$(".modal-content #smsForm #mobile").val();var d=c.replace(/\D/g,"");$.ajax({url:"/vzw/global/gadgets/sendSMSStoreAddress.jsp?",data:{mobileNumber:d||"",serviceProvider:$(".modal-content #smsForm #carrierSelect").val()||"",storeName:$("#storeName").val()||"",address1:$("#address1").val()||"",address2:$("#address2").val()||"",city:$("#city").val()||"",state:$("#state").val()||"",zipcode:$("#zipcode").val()||"",phoneNumber:$("#phoneNumber").val()||""},success:function(a){var a=JSON.parse(a);$("p.messagContainer").addClass("hide");var b=a.status;if("success"==b)$("p.messagContainer.success").removeClass("hide");else if("error"==b)$("p.messagContainer.error").removeClass("hide");else if("invalidInput"==b)$("p.messagContainer.invalidInput").removeClass("hide")},error:function(){$("p.messagContainer.error").removeClass("hide")},complete:function(){}})}})},addCustomMethodsAndRules:function(){$.validator.addMethod("customPhoneUS",function(a,b){a=a.replace(/\s+/g,"");return this.optional(b)||a.length>9&&a.match(/^\(?([1-9][0-9]{2})\)?[-.?]?([0-9]{3})[-.?]?([0-9]{4})$/)},"Please specify a valid phone number")}};App.pages.storeLocator.locator.smsoption.init();setTimeout(function(){var a=function(a,b){if(!b)b=window.location.search;a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);if(!d)return null;if(!d[2])return"";return decodeURIComponent(d[2].replace(/\+/g," "))};if("#showAppointments"===(location.hash?location.hash:null)){var b=$("#appt-container").closest(".sections-wrapper");if($("#lookingfor")){var c=a("appointmentName");if(c){$("#lookingfor").val(c);$("#lookingfor").selectpicker("refresh");if($("#lookingfor").prop("selectedIndex"))$('input[type="submit"]').prop("disabled",false).removeClass("disabled");else $('input[type="submit"]').prop("disabled",true).addClass("disabled")}}$("html, body").scrollTop(b.offset().top)}},1500);App.pages.storeLanding=App.pages.storeLanding||{};$(function(){if(0===$("body.storelanding").length)return false;App.pages.storeLanding.landingSlider();App.pages.storeLanding.slideWorkshopSched();App.pages.storeLanding.timeModal();App.pages.storeLanding.workshopTabs()});App.pages.storeLanding.landingSlider=function(){var a=this;a.initSlider($(".in-store-tab .tab-menu li.active").index());$(".in-store-tab .tab-menu").on("click","li",function(){a.initSlider($(this).index())});$(window).bind().on("resize orientationchange",function(b){a.initSlider($(".in-store-tab .tab-menu li.active").index())})};App.pages.storeLanding.initSlider=function(a){if(0===a)App.pages.storeLanding.landingSlider.slideHighlights=new Swiper(".highlights-content",{slidesPerView:"auto",autoResize:false});if(1===a)App.pages.storeLanding.landingSlider.slideSchedule=new Swiper(".schedule-content",{slidesPerView:"auto",autoResize:false})};App.pages.storeLanding.slideWorkshopSched=function(){var a=$("#instore-workshop .swiper-slide").length;var b=$("#instore-workshop .swiper-slide").outerWidth();var c=b*a;var d="#instore-workshop .arrows a";if(a>3)$(d).removeClass("disable");$(".btnNext").on("click",function(){var a=parseInt($("#instore-workshop .swiper-wrapper").css("margin-left"));var e=Math.abs(a);if(!$(d).hasClass("disable")&&e<c-b)$("#instore-workshop .swiper-wrapper").animate({marginLeft:"-="+b})});$(".btnPrev").on("click",function(){var a=parseInt($("#instore-workshop .swiper-wrapper").css("margin-left"));var c=Math.abs(a);if(!$(d).hasClass("disable")&&c>0)$("#instore-workshop .swiper-wrapper").animate({marginLeft:"+="+b})})};App.pages.storeLanding.timeModal=function(){$(".available-times-wrapper .btn-wrapper").addClass("hide");if($("#initialFocus").length)$("#initialFocus").remove();$(document.body).on("click",".modal-container .available-times li",function(){$(this).siblings("li").removeClass("active");$(this).addClass("active");$(".activeTimeSlot").val($(this).text());$(".activeScheduleItemId").val($(this).attr("id"));$(".available-times-continue").removeClass("hide");$(this).parents("form").find(".btn-wrapper").removeClass("hide")});$(document.body).on("click",".modal-container .available-times-continue",function(){if(!$(".modal-container .available-times li.active").length)return false;document.location="appointmentRegistration.jsp"})};App.pages.storeLanding.workshopTabs=function(){var a=$(".schedule-content");var b=$(".highlights-content");$(".tab-menu .schedule ").on("click",function(){$(a).parent().show();$(b).parent().hide()});$(".tab-menu .highlights ").on("click",function(){$(b).parent().show();$(a).parent().hide()})};App.pages.workshop=App.pages.workshop||{};$(function(){if(0===$("body.workshop-landing").length)return false;App.pages.workshop.nearTypeaheadSearch();App.pages.workshop.zipcodeTypeaheadSearch();App.pages.workshop.wrk_shop_store_search();App.pages.workshop.landingSlider();App.pages.workshop.workshopSlider();App.pages.workshop.showHide();App.pages.workshop.formValidation();App.pages.workshop.showSocial();App.pages.workshop.addPipeIE8()});App.pages.workshop.showHideAppointments=function(){$(".dateTimeDropdown").on("change",function(a){a.preventDefault();var b=$(this).parent(".result-slider");var c=b.find("div.date_swiper .schedule-day");var d=$(this).find("option:selected").attr("id");var e=b.find("div.date_swiper .schedule-day#"+d);var f=b.find("div#"+d);var g=".date_swiper .schedule-day#"+d;if("selectAll"==d)c.show();else{c.hide();e.show()}})};App.pages.workshop.newLocation=false;App.pages.workshop.disableSubmit=function(){if($("#view_workshop_id").val()&&$("#near").val().length<5||"default"==$("#categoryCode").val())$("form#workshopFinderForm").find("input[type=submit]").addClass("disabled").attr("disabled",true);else $("form#workshopFinderForm").find("input[type=submit]").removeClass("disabled").attr("disabled",false)};$("select#categoryCode").on("change",function(a){App.pages.workshop.disableSubmit()});App.pages.workshop.wrk_shop_store_search=function(){App.pages.workshop.disableSubmit();$("#near").on("focus",App.pages.workshop.disableSubmit);if("undefined"==typeof google)App.helpers.loadGoogleMapAPI("App.pages.workshop.wrk_shop_store_search");var a;var b;var c;var d;$("#workshopFinderForm").submit(function(e){e.preventDefault();var f=$("#near").val();var g=$("#categoryCode").val();(new google.maps.Geocoder).geocode({address:f,partialmatch:true},function(e,f){if(f===google.maps.GeocoderStatus.OK){App.pages.storeLocator.locator.parseSearchTerm(e[0]);a=App.pages.storeLocator.locator.searchTermStreet;c=App.pages.storeLocator.locator.searchTermCity;b=App.pages.storeLocator.locator.searchTermState;d=App.pages.storeLocator.locator.searchTermZip;document.location="workshopResults.jsp?typeAheadSearch=true&street="+a+"&zip="+d+"&state="+b+"&city="+c+"&catCode="+g}})});$("#categoryCode").on("change",function(a){App.helpers.observer.publish("trackEvent",$("#categoryCode option:selected").text())});$("#looking").on("change",function(a){App.helpers.observer.publish("trackEvent",$("#looking option:selected").text())});$("#stores").on("change",function(a){App.helpers.observer.publish("trackEvent",$("#stores option:selected").text())});$("#near, #wrk_shop_store-search").typeahead({name:"StoreSearch",local:[],remote:{url:"/vzw/rest/storelocatorTypeAheadJson.jsp?proximitySearchStr=%QUERY&authRetailers=true",async:false,filter:function(a){var b=[];if(null!=a)for(i=0;i<a.stores.length;i++)b.push(a.stores[i].address);App.pages.storeLocator.locator.getcurrentLocation();return b}},limit:3,minLength:3,header:[].join("")}).on("keyup",function(){if(0===$(".tt-cl").length){$(".tt-suggestions").prepend('<div class="tt-suggestion tt-cl" style="white-space: nowrap; cursor: pointer;"><p style="white-space: normal;">Current Location</p></div>');$('.tt-cl:contains("Current Location")').on("click",function(){$("#near").val(App.pages.storeLocator.locator.currentLocation);$(this).parent().parent().css("display","none")})}App.pages.workshop.disableSubmit()});$("#wrk_shop_store-search").on("change",function(){App.pages.workshop.newLocation=true;setTimeout("$('form#workshop-finder').submit()",222)})};App.pages.workshop.nearTypeaheadSearch=function(){if(0==$("#workshopFinderForm").length)return false;$("#workshopFinderForm #near").typeahead({name:"find-workshop-near",local:[{name:"New York, NY",value:"New York, NY"},{name:"Los Angeles, CA",value:"Los Angeles, CA"},{name:"Warren, NJ",value:"Warren, NJ"},{name:"Irvine, CA",value:"Irvine, CA"}],template:['<p class="suggest_item"> <span class="title">{{name}}</span></p>'].join(""),engine:Hogan})};App.pages.workshop.zipcodeTypeaheadSearch=function(){if(0==$("#ZipCodeSearch").length)return false;$("[data-colorbox*=location-full-popup]").off("click.typeahead").on("click.typeahead",function(){setTimeout(function(){var a=$(".modal-content-wrapper");a.css("overflow","visible");a.find("#ZipCodeSearch").typeahead({name:"find-workshop-zipcode",local:[],remote:{url:"/vzw/rest/storelocatorTypeAheadJson.jsp?proximitySearchStr=%QUERY&authRetailers=true",async:false,filter:function(a){var b=[];if(null!=a)for(i=0;i<a.stores.length;i++)b.push(a.stores[i].address);App.pages.storeLocator.locator.getcurrentLocation();return b}},limit:3,minLength:3,template:['<span class="suggest_item"> <span class="title">{{value}}</span></span>'].join(""),engine:Hogan}).on("keyup",function(){if(0===a.find(".tt-cl").length){a.find(".tt-suggestions").prepend('<div class="tt-suggestion tt-cl" style="white-space: nowrap; cursor: pointer;"><span class="suggest_item" style="white-space: normal;"> <span class="title">Current Location</span></span></div>');a.find('.tt-cl:contains("Current Location")').on("click",function(){a.find(".tt-hint").val("");a.find("#ZipCodeSearch").eq(0).val(App.pages.storeLocator.locator.currentLocation)})}});var b;var c;var d;var e;$(".modal-container #ZipCodeSubmit, .modal-container #ZipCodeSubmitInputBtn").on("click",function(a){a.preventDefault();var f=$(".modal-container #ZipCodeSearch").val();(new google.maps.Geocoder).geocode({address:f,partialmatch:true},function(a,f){if(f===google.maps.GeocoderStatus.OK){App.pages.storeLocator.locator.parseSearchTerm(a[0]);b=App.pages.storeLocator.locator.searchTermStreet;d=App.pages.storeLocator.locator.searchTermCity;c=App.pages.storeLocator.locator.searchTermState;e=App.pages.storeLocator.locator.searchTermZip;document.location="workshopResults.jsp?typeAheadSearch=true&street="+b+"&zip="+e+"&state="+c+"&city="+d+"&catCode=categoryAll"}})})},1e3)})};App.pages.workshop.landingSlider=function(){var a=$(".recommended-slider-workshop .swiper-slide"),b=$(".recommended-slider-videos .swiper-slide"),c="auto";App.pages.workshop.landingSlider.workshop=new Swiper(".recommended-slider-workshop",{slidesPerView:"auto",onSwiperCreated:function(){a.width(c-1);a.width(c)}});var d=true;$(".recommended-tab .tab-menu li").on("click",function(){if(1===$(this).index())App.pages.workshop.landingSlider.videos=new Swiper(".recommended-slider-videos",{slidesPerView:"auto",onSwiperCreated:function(){b.width(c-1);b.width(c)}})})};App.pages.workshop.initDateSlider=function(){var a=".workshop-slide.active .result .date-slider";if(!$(a).hasClass("processed"))App.pages.workshop.initDateSlider.dateSlider=new Swiper(a,{slidesPerView:"auto"});else App.pages.workshop.initDateSlider.dateSlider.reInit();var b=$(a),c=b.find(".slide-prev"),d=b.find(".slide-next"),e=App.pages.workshop.initDateSlider.dateSlider;b.addClass("processed");var f=e.activeIndex,g=e.visibleSlides.length,h=e.slides.length;if(0===f)c.addClass("disable");if(f+g>=h)d.addClass("disable");c.on("click",function(a){a.preventDefault();var b=f-g>-1?f-g:0;if(h>0)e.swipeTo(b);f=e.activeIndex;if(0===f)return false;d.removeClass("disable");if(0===f)$(this).addClass("disable")});d.on("click",function(a){a.preventDefault();if(h>0&&f+g<h)e.swipeTo(f+g);f=e.activeIndex;if(f+g>=h)return false;c.removeClass("disable");if(f+g>=h)$(this).addClass("disable")});e.wrapperTransitionEnd(function(){f=e.activeIndex;if(0===f){d.removeClass("disable");c.addClass("disable")}else if(f+g>=h){d.addClass("disable");c.removeClass("disable")}else if(f>0){d.removeClass("disable");c.removeClass("disable")}},true);$(".workshop-slide.active .result .date-slider .vertical-slider").each(function(){App.pages.workshop.initDateSlider.vDateSlider=new Swiper(this,{mode:"vertical",slidesPerView:"auto"})})};App.pages.workshop.initLocationSlider=function(){App.pages.workshop.initLocationSlider.locationSlider=new Swiper(".workshop-slide.active .result .location-slider",{slidesPerView:"auto"});var a=$(".workshop-slide.active .result .location-slider"),b=a.find(".slide-prev"),c=a.find(".slide-next"),d=App.pages.workshop.initLocationSlider.locationSlider;var e=d.activeIndex,f=d.visibleSlides.length,g=d.slides.length;if(0===e)b.addClass("disable");if(e+f>=g)c.addClass("disable");b.on("click",function(a){a.preventDefault();var b=e-f>-1?e-f:0;if(g>0)d.swipeTo(b);e=d.activeIndex;if(0===e)return false;c.removeClass("disable");if(0===e)$(this).addClass("disable")});c.on("click",function(a){a.preventDefault();if(g>0&&e+f<g)d.swipeTo(e+f);e=d.activeIndex;if(e+f>=g)return false;b.removeClass("disable");if(e+f>=g)$(this).addClass("disable")});d.wrapperTransitionEnd(function(){e=d.activeIndex;if(0===e){c.removeClass("disable");b.addClass("disable")}else if(e+f>=g){c.addClass("disable");b.removeClass("disable")}else if(e>0){c.removeClass("disable");b.removeClass("disable")}},true);$(".workshop-slide.active .location-slider .vertical-slider").each(function(){App.pages.workshop.initLocationSlider.vLocationSlider=new Swiper(this,{mode:"vertical",slidesPerView:"auto"})})};App.pages.workshop.workshopSlider=function(){App.pages.workshop.workshopSlider.swiperParent=new Swiper(".workshop-content",{slidesPerView:"auto"})};App.pages.workshop.showHide=function(){var a=0,b=function(b,c){if("undefined"!=typeof b.target)b.preventDefault();else b.target="";App.pages.workshop.resetAll();var d=c.parents(".workshop-slide");if(true!==$(b.target).is(".remove")&&!d.find(".result").length){d.addClass("active").siblings(".workshop-slide").removeClass("active").find(".result").addClass("hide");var e=d.find(".result-item").html();var f=$('<div class="result">'+e+"</div>").insertAfter(d.find(".result-item"));d.siblings(".workshop-slide").find(".result").remove();a=c.parents(".workshop-slide").index();App.pages.workshop.workshopSlider.swiperParent.reInit();App.pages.workshop.workshopSlider.swiperParent.swipeTo(a);App.pages.workshop.initDateSlider();f.find("select").selectpicker();App.pages.workshop.showHideAppointments()}App.plugins.tab()};if(1===$(".workshop").length)b(new Object,$(".workshop"));$(document).ready(function(){if("undefined"!=typeof workshopId&&workshopId){var a="#workshop_"+workshopId;b(new Object,$(a))}$("input.mobile-number").mask("(000) 000-0000")});$(".workshop-content .workshop-slide").off().on("click",".workshop",function(a){b(a,$(this))});$(".workshop-content .workshop .remove").click(function(b){b.preventDefault();var c=$(this).parents(".workshop-slide");c.removeClass("active").find(".result").addClass("hide");c.find(".avaibility").show();App.pages.workshop.initDateSlider.dateSlider.destroy();if(!$("body").hasClass("storelanding"))App.pages.workshop.initDateSlider.vDateSlider.destroy();c.find(".result").remove();App.pages.workshop.workshopSlider();App.pages.workshop.workshopSlider.swiperParent.swipeTo(a)});$(document).on("click",".workshop-slide.active .result-tab .tab-menu li",function(){if(0===$(this).index())App.pages.workshop.initLocationSlider()});$(".aditional-guest-wrapper").on("click",".add-guest-form, .add-another-guest",function(a){a.preventDefault();var b=$(".guest-form").length;var c=$("#guest"+b);if(null!=c){$(this).hide();$('<div class="guest-form"></div>').appendTo(".aditional-guest-wrapper").html(c.html());$("input.mobile-number").mask("(000) 000-0000");$(".guest-form .close").on("click",function(a){a.preventDefault();$(this).parents(".guest-form").remove();var b=$(".guest-form").length;if(0!==b)$(".guest-form").eq(b-1).find(".add-another-guest").show();else $(".aditional-guest-wrapper").find(".add-guest-form").show()})}})};App.pages.workshop.resetAll=function(){$(".workshop-content .workshop-slide").each(function(){if($(this).hasClass("active"))$(this).find(".workshop .remove").on("click")})};App.pages.workshop.formValidation=function(){var a,b,c,d,e,f,g;var h=function(a){var b=$(a).find("#phone");var c=b.val();c=c.replace(/\D/g,"");b.val(c)};$("#workshopFinderForm").validate({ignore:".ignore, :hidden",highlight:function(a,b,c){if("radio"===a.type)this.findByName(a.name).addClass(b).removeClass(c);else $(a).addClass(b).removeClass(c);$(a).siblings(".error.success").removeClass("success")},focusCleanup:true,focusInvalid:false,rules:{selectAddress:{required:true}},messages:{selectAddress:"Please enter store name or zipcode"}});$("#workshopInfoForm").validate({ignore:".ignore, :hidden",submitHandler:function(a){h(a);a.submit()},highlight:function(a,b,c){if("radio"===a.type)this.findByName(a.name).addClass(b).removeClass(c);else $(a).addClass(b).removeClass(c);$(a).siblings(".error.success").removeClass("success")},focusCleanup:true,focusInvalid:false,rules:{fname:{required:true,alphaOnly:true,maxlength:30},lname:{required:true,alphaOnly:true,maxlength:30},email:{required:true,email:true,maxlength:80},confirmEmail:{required:{depends:function(a){return $(a).parents("form").find("input[name=email]").val().length>0}},email:true,maxlength:80,equalTo:"#email"},phone:{required:true,usPhone:true},mobile:{required:true,usPhone:true}},messages:{fname:"Please enter your first name",lname:"Please enter your last name",email:{required:"Please enter your email address",email:"Please enter a valid email address",maxlength:"Please enter a valid email address"},confirmEmail:{required:"Please enter your email address",email:"Please enter a valid email address",maxlength:"Please enter a valid email address",equalTo:"CONFIRM EMAIL address not match"},phone:{required:"Please enter your phone number",usPhone:"Please enter a valid phone number"},mobile:{required:"Please enter your mobile phone number",usPhone:"Please enter a valid mobile phone number"}}});f={IDToken1:{required:[true,"Please enter your User ID or Phone Number"],maxlength:[60,"Please enter your User ID or Phone Number"],noPlaceholder:[true,"Please enter your User ID or Phone Number"]},selectAddress:{required:[true,"2Please enter store name or zipcode"]},"wrk_shop_store-search":{required:[true,"Please enter store name or zipcode"]},username:{required:[true,"Please enter your User ID or Phone Number"],alphaExtended:[true,"Please enter your User ID or Phone Number"],maxlength:[15,"Please enter your User ID or Phone Number"],noPlaceholder:[true,"Please enter your User ID or Phone Number"]},password:{required:[true,"Please enter your password"],alphaExtended:[true,"Please enter your password"],maxlength:[15,"Please enter your password"],noPlaceholder:[true,"Please enter your password"]},fname:{required:[true,"Please enter your first name"],firstName:[true,"Please enter your first name"],maxlength:[30,"Please enter your first name"],noPlaceholder:[true,"Please enter your first name"]},lname:{required:[true,"Please enter your last name"],alphaExtended:[true,"Please enter your last name"],maxlength:[32,"Please enter your last name"],noPlaceholder:[true,"Please enter your last name"]},email:{required:[true,"Please enter your email address"],noPlaceholder:[true,"Please enter your email address"],maxlength:[80,"Please enter a valid email address"],email:[true,"Please enter a valid email address"]},confirmEmail:{required:[true,"Please enter your email address"],noPlaceholder:[true,"Please enter your email address"],maxlength:[80,"Please enter a valid email address"],email:[true,"Please enter a valid email address"],equalTo:["#email","CONFIRM EMAIL address not match"]},phone:{required:[true,"Please enter your phone number"],noPlaceholder:[true,"Please enter your phone number"],phoneUS:[true,"Please enter a valid phone number"],maxlength:[10,"Please enter a valid phone number"]},mobile:{required:[true,"Please enter your mobile number"],noPlaceholder:[true,"Please enter your mobile number"],phoneUS:[true,"Please enter a valid mobile number"],maxlength:[10,"Please enter a valid mobile number"]},ZipCodeSearch:{required:[true,"Please enter your zip code"],number:[true,"Please enter your zip code"],maxlength:[15,"Please enter your zip code"],noPlaceholder:[true,"Please enter your zip code"]},guestFname:{required:[true,"Please enter your first name"],alphaExtended:[true,"Please enter your first name"],maxlength:[20,"Please enter your first name"],noPlaceholder:[true,"Please enter your first name"]},guestLname:{required:[true,"Please enter your last name"],alphaExtended:[true,"Please enter your last name"],maxlength:[32,"Please enter your last name"],noPlaceholder:[true,"Please enter your last name"]},guestEmail:{required:[true,"Please enter your email address"],noPlaceholder:[true,"Please enter your email address"],maxlength:[80,"Please enter a valid email address"],email:[true,"Please enter a valid email address"]},guestConfirmEmail:{required:[true,"Please enter your email address"],noPlaceholder:[true,"Please enter your email address"],maxlength:[80,"Please enter a valid email address"],email:[true,"Please enter a valid email address"],equalTo:["#guestEmail","CONFIRM EMAIL address not match"]},guestMobile:{required:[true,"Please enter your phone number"],noPlaceholder:[true,"Please enter your phone number"],phoneUS:[true,"Please enter a valid phone number"],maxlength:[10,"Please enter a valid phone number"]}};e=[];c=[];for(b in f){a=f[b];c[b]=[];e[b]=[];for(d in a){g=a[d];if("successMessage"!==d){c[b][d]=g[1];e[b][d]=g[0]}}}$("form").each(function(){if("workshopInfoForm"===this.id)return;$(this).addClass("processed");$(this).validate({ignore:".ignore, :hidden",success:function(a,b){var c,d;c=$(b).attr("name");d="";if("undefined"!==typeof f[c]&&void 0!==f[c].successMessage)d=f[c].successMessage;a.addClass("success").text(d);a.siblings(".error").removeClass("error")},highlight:function(a,b,c){if("radio"===a.type)this.findByName(a.name).addClass(b).removeClass(c);else $(a).addClass(b).removeClass(c);$(a).siblings(".error.success").removeClass("success")},focusInvalid:false,focusCleanup:true,rules:e,onkeyup:false,messages:c});return true})};App.pages.workshop.showSocial=function(){var a=$("#wsShareContainer");if(a&&a.size()>0)App.plugins.social.shareBar.init("wsShareContainer",App.data.social.wsShareContainer)};App.pages.workshop.addPipeIE8=function(){if(!document.addEventListener)$(".workshop-filter .registration-box p span.get-start").next("span").append(" | ")};$(function(){var a=null,b=null;$("form#workshop-finder").off("submit.workshop").on("submit.workshop",function(){if($(this).valid()){var a=$("#looking option:selected").val();var b=App.pages.workshop.newLocation?"storesAll":$("#stores").val();var c=$("#wrk_shop_store-search").val();var d=$(".icheckbox input:checked").length?"SPA":"ENG";(new google.maps.Geocoder).geocode({address:c,partialmatch:true},function(c,e){if(e===google.maps.GeocoderStatus.OK){App.pages.storeLocator.locator.parseSearchTerm(c[0]);street=App.pages.storeLocator.locator.searchTermStreet;city=App.pages.storeLocator.locator.searchTermCity;state=App.pages.storeLocator.locator.searchTermState;zip=App.pages.storeLocator.locator.searchTermZip;url="gadgets/workShopDetails.jsp?isAjaxCall=true&typeAheadSearch=true&street="+street+"&zip="+zip+"&state="+state+"&city="+city+"&catCode="+a+"&selectStoreId="+b+"&langId="+d;c=$.ajax({url:url,param:$(this).serialize(),method:"post",success:function(a){c=null;$(".workshop-content").replaceWith(a);App.pages.workshop.landingSlider();App.pages.workshop.workshopSlider();App.pages.workshop.showHide();if(App.pages.workshop.newLocation){var b=[];var d="";$('[class^="place "]').each(function(a,c){storeName=this.className.substr(6);if(-1==$.inArray(storeName,b)){b.push(storeName);d+='<option value="'+$(c).parents(".schedule").next().find('[name="regStoreId"]').val()+'">'+storeName+"</option>"}});d='<option value="storesAll" selected="selected">all stores ('+b.length+")</option>"+d;$("#stores").html(d);$("#stores").selectpicker("refresh")}App.pages.workshop.newLocation=false},complete:function(){}})}})}return false}).find("input[type=checkbox],select,textarea").off("change.workshop ifUnchecked.workshop ifChecked.workshop").on("change.workshop ifUnchecked.workshop ifChecked.workshop",function(){$(this.form).submit()})});